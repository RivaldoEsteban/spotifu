/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{baaafjdcde:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=a("dghfbecefg"),o=i(a("ccbgfecegc")),l=i(a("bbfjdcedab")),d=i(a("dhigahgdjb")),c=i(a("gfebgebbi")),u=i(a("bdeebiagii")),h=i(a("bdjjabfecc")),f=a("cgjcdbggeb"),p=s(a("chbeahhfcj"));class m extends u.default{constructor(...e){super(...e),this.isGroupParticipant=e=>{var{chat:t}=this.props;return!!t.groupMetadata.participants.get(e)},this.customSecondaryText=e=>{var{chat:t}=this.props;return t.groupMetadata.participants.get(e)?h.default.t(203):null},this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!d.default.isFilteredContact(e)&&(!t.participants.get(e.id)||h.default.t(203))},this.confirmAddParticipant=e=>{var{chat:t}=this.props;this.push(n.createElement(l.default,{onOK:this.onAddParticipant.bind(this,e),okText:h.default.t(192,{_plural:e.length}),onCancel:this._pop,cancelText:h.default.t(1431)},n.createElement(c.default,{text:this.makeNameEnumeration(e,t.contact.name)})))},this.makeNameEnumeration=(e,t)=>{var a=e.map(e=>e.formattedShortName||e.shortName).reduce((t,a,i)=>[...t,a,i!==e.length-1&&h.default.t(512)||""],[]);return h.default.t(423,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,e).catch(()=>{}),o.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(p.default,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:h.default.t(192),isDisabled:this.isGroupParticipant,isSelected:this.isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:p.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:r.FooterType.CONFIRM,multipleSelectionFooterType:r.FooterType.CONFIRM}))}}t.default=m},bagchhaeje:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("cajhjbjeea")),o=i(a("dbdfbgehgj")),l=i(a("cfadcbbiie")),d=i(a("ccbgfecegc")),c=i(a("ieeidjijb")),u=i(a("dhigahgdjb")),h=s(a("hhcjfgifh")),f=i(a("dahagdijgh")),p=i(a("bjheffjbgd")),m=i(a("cciafahdib")),g=s(a("bjjhgjdbhd")),b=i(a("ddeefhbafc")),v=i(a("bgheieccaj")),E=i(a("dbfjeecgih")),j=a("ddbdgibbbi"),C=i(a("bhbdiadfhj")),M=i(a("jheedhagg")),_=i(a("bdjjabfecc")),S=i(a("ebddggeaib")),T=i(a("cdicaaigga")),y=i(a("dcdbbhicce")),P=a("cjfegjecaj"),N=i(a("dgdcjccfdi")),I=a("dhhjhedjij"),k=i(a("jccfhaecf"));class A extends n.Component{constructor(...e){super(...e),this.flatListController=new E.default,this.onParticipantClick=(e,t)=>{k.default.equals((0,j.getMaybeMeUser)(),t.id)||o.default.find(t.id).then((function(e){d.default.openChatFromUnread(e).then(t=>{t&&d.default.focusChatTextInput(e)})}))},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onDelete=()=>{d.default.deleteOrExitChat((0,P.unproxy)(this.props.chat))},this.renderItem=e=>{var{participant:t}=e,a=u.default.gadd(t.id);return n.createElement(c.default,{contact:a,theme:"drawer-list",admin:!!t.isAdmin,onClick:this.onParticipantClick,key:t.id.toString(),waitIdle:!0})}}componentDidMount(){var e=this.props.chat.groupMetadata;this.props.listeners.add(e.participants,"add remove sort reset",()=>{this.forceUpdate()})}getData(){return this.props.chat.groupMetadata.participants.map(e=>({itemKey:e.id.toString(),participant:e}))}render(){var e=this.props.chat,t=null;if(this.props.onMediaGallery){var a=n.createElement(N.default,{className:r.default.chevron,name:"chevron-right-alt",directional:!0}),i=C.default.supportsFeature(C.default.F.LINK_DOC_GALLERY)?_.default.t(811):_.default.t(808);t=n.createElement(b.default,{title:i,titleOnClick:this.props.onMediaGallery||(()=>{}),subtitle:a,theme:"padding"},n.createElement(T.default,{chat:(0,P.unproxy)(e),mediaMsgs:e.getMediaMsgs()}))}var s,o=this.props.chat.groupMetadata.participants,d=n.createElement(I.TextSpan,{theme:"section-title"},_.default.n(o.length)),c=o.length?n.createElement(b.default,{title:_.default.t(1632),subtitle:d},n.createElement(v.default,{flatListController:this.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem})):null,u=n.createElement(b.default,null,n.createElement(m.default,{a8nText:"li-delete-broadcast",icon:n.createElement(N.default,{name:"delete"}),color:"danger",theme:"list-aligned",onClick:this.onDelete},_.default.t(1470)));return e.groupMetadata.creation?(s=l.default.createdStr(e.groupMetadata.creation),s=n.createElement(I.TextDiv,{theme:"small"},s)):s=null,n.createElement(f.default,{key:"contact-info-modal",theme:"striped"},n.createElement(g.default,{type:g.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose},n.createElement(I.TextDiv,{theme:"title"},_.default.t(315)),s),n.createElement(p.default,{flatListControllers:[this.flatListController]},n.createElement("div",{className:r.default.body},n.createElement("div",{className:r.default.photo},n.createElement(h.default,{id:e.id,size:h.DETAIL_IMAGE_SIZE.LARGE})),t,null,c,u)))}}A.CONCERNS={chat:["id","groupMetadata"]};var D=(0,M.default)((0,S.default)((0,y.default)(A,A.CONCERNS)));t.default=D},bajacafbgd:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("ccbgfecegc")),o=i(a("bbfjdcedab")),l=i(a("bdjjabfecc")),d=i(a("bjgjggcbjf"));class c extends n.PureComponent{constructor(e){super(e),this._handleOK=()=>{var{selectedValue:e}=this.state;null!=e&&this.props.onSelect(e),this.closeModal()},this._handleChange=e=>{var{target:t}=e;t instanceof HTMLInputElement&&this.setState({selectedValue:parseInt(t.value,10)})},this.closeModal=()=>{r.default.closeModal()},this.state={selectedValue:e.initialValue}}render(){var e=this.props.options.map(({value:e,label:t})=>n.createElement("li",{key:"setting-".concat(e)},n.createElement("label",{className:d.default.label},n.createElement("input",{type:"radio",className:d.default.input,value:String(e),checked:e===this.state.selectedValue,onChange:this._handleChange}),t)));return n.createElement(o.default,{title:this.props.title,okText:l.default.t(424),onOK:this._handleOK,onCancel:this.closeModal},n.createElement("form",null,n.createElement("ol",null,e)))}}t.default=c},bcbjddibih:function(e,t){e.exports={thumbsContainer:"_17JJa",scrollContainer:"_3OapF",viewerThumbs:"_1jYaq",mediaThumb:"dWQh3",thumbPadding:"_1RPFM"}},bdaddecbdh:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("effbcehec")),o=i(a("daghjjjedc")),l=i(a("cfadcbbiie")),d=i(a("ccbgfecegc")),c=i(a("bbfjdcedab")),u=i(a("gaeccibgi")),h=i(a("bdjjabfecc")),f=i(a("dcdbbhicce")),p=a("cjfegjecaj"),m=a("dhhjhedjij");class g extends n.PureComponent{constructor(...e){super(...e),this.onMute=e=>{d.default.muteChat((0,p.unproxy)(this.props.chat),e)},this.onUnmute=()=>{var e=this.props.chat.isGroup?h.default.t(440):h.default.t(438);d.default.openModal(n.createElement(c.default,{onOK:this.unmute,okText:h.default.t(64),onCancel:()=>d.default.closeModal(),cancelText:h.default.t(1431)},e))},this.unmute=()=>{this.onMute(!1),d.default.closeModal()}}render(){var e,t=this.props.mute.isMuted,a=this.props.chat.muteExpiration,i=t?this.onUnmute:()=>{this.onMute(!0)},s=n.createElement(o.default,{checked:t,onChange:i}),d=t?h.default.t(1439):h.default.t(1560);if(t&&a){var c=l.default.untilStr(a);e=n.createElement(m.TextDiv,{theme:"muted"},c)}return n.createElement(u.default,{a8nText:r.default.key("block-mute"),side:s,onClick:i,multiline:!(!t||!a)},n.createElement(m.TextSpan,{theme:"title"},d),e)}}g.CONCERNS={chat:["isGroup","muteExpiration"],mute:["isMuted"]};var b=(0,f.default)(g,g.CONCERNS);t.default=b},bdjgdghiah:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("hhegggegb")),r=i(a("ddhijeejag")),o=s(a("ccbgfecegc")),l=s(a("hgigjbgie")),d=a("cdhbdacigj"),c=s(a("edfgfbdfg")),u=s(a("bijdgebdaf")),h=s(a("ccadaajdfc")),f=a("cjfegjecaj");class p extends r.Component{constructor(...e){super(...e),this._setScrollContainer=e=>{this._scrollContainer=e},this._onScroll=e=>{this._handleScroll(e.target)},this._handleScroll=(0,n.default)(e=>{var{hasBefore:t,msgsCollection:a,setScrollOffset:i}=this.props,s=e.scrollHeight-e.clientHeight-e.scrollTop<l.default.SCROLL_FUDGE;t&&s&&this._queryCollection(a.head()),i&&i(e.scrollTop)},100),this._handleClickMsg=(e,t)=>{var a=(0,f.unproxy)(e);this.props.selectable&&void 0!==t?this.props.onMessageSelect(a,t):o.default.openChatAt(a.chat,a.chat.getSearchContext(a))}}componentDidMount(){var{hasBefore:e,scrollOffset:t}=this.props;e&&this._queryCollection(),this._scrollContainer&&(this._scrollContainer.scrollTop=t)}componentWillUnmount(){this._handleScroll.cancel()}_queryCollection(e){var{hasBefore:t,queryCollection:a}=this.props;t&&a(e)}_renderElements(){var{msgsCollection:e,selectedMessages:t,renderElements:a}=this.props;return a?a(this._handleClickMsg):e.map((e,a)=>r.createElement(h.default,{key:"".concat(e.id.toString(),"_").concat(a),msg:e,selectable:this.props.selectable,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,displayType:l.default.DISP_TYPE.GALLERY,onClickMsg:this._handleClickMsg,onProductClick:this.props.onProductDetail})).reverse()}render(){var{queryBefore:e,hasBefore:t,msgsCollection:a,emptyText:i}=this.props,s=this._renderElements();if(e){if(0===s.length)return r.createElement(d.Loading,null);s.push(r.createElement(c.default,null))}return 0!==a.length||e||t?r.createElement("div",{ref:this._setScrollContainer,onScroll:this._onScroll,className:u.default.wrapper},s):r.createElement(d.Empty,{text:i,a8nText:"no-elements"})}}t.default=p,p.defaultProps={scrollOffset:0}},bfdjaabbje:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfile=void 0;var n=s(a("ceffhbhahb")),r=i(a("ddhijeejag")),o=s(a("dbejedjeej")),l=s(a("dghiegaafa")),d=s(a("ccbgfecegc")),c=s(a("hgigjbgie")),u=s(a("cciafahdib")),h=s(a("ddeefhbafc")),f=s(a("gfebgebbi")),p=s(a("djaiggcdb")),m=s(a("bhbdiadfhj")),g=s(a("bdjjabfecc")),b=s(a("cbedabhaa")),v=s(a("cjafajdgce")),E=a("igiffibee"),j=s(a("bdcchebfge")),C=a("eaefbieabb"),M=s(a("ecdebjcgfa")),_=s(a("dcdbbhicce")),S=s(a("dgdcjccfdi")),{VERIFIED_LEVEL:T}=c.default;class y extends r.PureComponent{constructor(...e){super(...e),this.state={collapsedHours:!0},this.onBusinessHoursClick=()=>{this.setState({collapsedHours:!this.state.collapsedHours})},this.onBusinessInfoClick=()=>{d.default.openModal(r.createElement(o.default,{contact:this.props.contact}))}}componentDidMount(){new j.default.ViewBusinessProfile({viewBusinessProfileAction:j.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}getBusinessInfoTitle(){var e,t=this.props.contact,a=!t.name||t.name===t.verifiedName,i="psa-unverified";switch(t.verifiedLevel){case T.HIGH:i="psa-verified",a?e=r.createElement(f.default,{className:l.default.verifiedLabel,text:g.default.t(331)}):(e=r.createElement(f.default,{className:l.default.verifiedLabel,text:g.default.t(329)}),e=r.createElement(b.default,{id:330,params:{verified:e,businessName:t.verifiedName}}));break;case T.LOW:e=a?r.createElement(f.default,{text:g.default.t(327)}):g.default.t(326,{businessName:t.verifiedName});break;case T.UNKNOWN:e=g.default.t(325)}return r.createElement(N,{icon:i,className:l.default.businessMarker,onClick:this.onBusinessInfoClick},e)}getBusinessInfoTitleV2(){var e;switch(this.props.contact.verifiedLevel){case T.HIGH:e=g.default.t(328);break;case T.LOW:case T.UNKNOWN:e=g.default.t(325)}return r.createElement(u.default,{a8nText:"business-title",className:l.default.businessTitleText,onClick:this.onBusinessInfoClick},e)}getBusinessHours(e){var t=(0,C.getBusinessHours)(e).map(e=>{var{day:t,hours:a,first:i}=e;return!i&&this.state.collapsedHours?null:r.createElement(P,{day:t,key:t,hours:a,first:i,collapsed:this.state.collapsedHours})});return r.createElement(N,{icon:"business-hours",onClick:this.onBusinessHoursClick},t)}getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:i}=e;return t&&a&&i?g.default.t(324,{streetAddress:t,city:a,zipCode:i}):t&&a?g.default.t(323,{streetAddress:t,city:a}):t}getAddress(e,t,a,i){var s,n,o,d=i?this.getAddressString(i):null;(null!=t&&null!=a&&(s=r.createElement("div",{style:{height:150},className:l.default.businessMap},r.createElement(v.default,{lat:t,lng:a,name:d||e,width:565,height:150}))),d)&&(o=null!=t&&null!=a?(0,E.getMapUrl)(t,a,d):(0,E.getSearchUrl)(d),n=r.createElement("div",{className:l.default.address},r.createElement(p.default,{href:o},r.createElement(f.default,{selectable:!0,direction:"auto",text:d}))));return n||s?r.createElement(N,{icon:"business-address"},n,s):null}render(){var e,t,a,i,s,n,o,d;e=m.default.supportsFeature(m.default.F.VNAME_V_2)?this.getBusinessInfoTitleV2():this.getBusinessInfoTitle();var c,u=this.props.businessProfile;if(u.stale)t=r.createElement("div",{className:l.default.contactBusinessInfoSpinner},r.createElement(M.default,{size:20,stroke:5}));else if(a=u.categories&&u.categories.length?r.createElement(N,{icon:"business-category"},r.createElement(f.default,{selectable:!0,direction:"auto",text:u.categories.map(e=>e.localized_display_name).join(g.default.t(512))})):null,i=u.description?r.createElement(N,{icon:"business-description"},r.createElement(f.default,{selectable:!0,direction:"auto",text:u.description})):null,s=this.getAddress(this.props.contact.name,u.latitude,u.longitude,u.structuredAddress),u.website&&Array.isArray(u.website)&&u.website.length&&(n=u.website.map((e,t)=>{var a=(0,C.getWebsiteLink)(e),i=r.createElement(f.default,{selectable:!0,direction:"auto",text:e}),s=r.createElement(p.default,{className:l.default.link,href:a},i);return r.createElement(N,{icon:"business-website",key:t},s)})),u.businessHours&&(o=this.getBusinessHours(u.businessHours)),u.email){var b=r.createElement(f.default,{selectable:!0,direction:"auto",text:u.email}),v=r.createElement(p.default,{className:l.default.link,href:"mailto:".concat(u.email)},b);d=r.createElement(N,{icon:"business-email",dir:"auto"},v)}return(t||null!=s||a||i||null!=o||d||n)&&(c=r.createElement(h.default,{theme:"padding"},r.createElement("div",{className:l.default.contactBusinessInfo},t,s,a,i,o,d,n))),r.createElement(r.Fragment,null,r.createElement(h.default,null,e),c)}}t.BusinessProfile=y,y.CONCERNS={contact:["id","verifiedLevel","name","verifiedName"],businessProfile:["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]};var P=e=>{var t=e.first?r.createElement("div",{className:l.default.businessHoursChevron,role:"button"},r.createElement(S.default,{className:e.collapsed?"":l.default.flipSvg,display:"inline",name:"chevron-down-alt"})):null;return r.createElement("div",{className:l.default.businessHoursRow},r.createElement("div",{className:l.default.businessHoursDay},r.createElement(f.default,{direction:"auto",text:e.day})),r.createElement("div",{className:l.default.businessHoursHours},r.createElement(f.default,{direction:"auto",text:e.hours})),t)},N=e=>r.createElement("div",{className:(0,n.default)(l.default.dataRow,e.className),onClick:e.onClick},r.createElement("div",{className:l.default.dataRowIcon},r.createElement(S.default,{name:e.icon})),r.createElement("div",{className:l.default.dataRowText},e.children)),I=(0,_.default)(y,y.CONCERNS);t.default=I},bgcibhihaj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.size!==t.size)return!1;for(var[a,i]of e)if(t.get(a)!==i)return!1;return!0}},bgdcbcbibj:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("ccbgfecegc")),o=i(a("bbfjdcedab")),l=i(a("dhigahgdjb")),d=i(a("bdacheahgj")),c=i(a("gfebgebbi")),u=i(a("bdeebiagii")),h=i(a("bdjjabfecc")),f=a("cgjcdbggeb");class p extends u.default{constructor(...e){super(...e),this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!l.default.isFilteredContact(e)&&(!t.participants.get(e.id)||h.default.t(203))},this.confirmAddParticipant=e=>{var t=this.onAddParticipant.bind(this,e),a=h.default.t(422,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push(n.createElement(o.default,{onOK:t,okText:h.default.t(192),onCancel:this._pop,cancelText:h.default.t(1431)},n.createElement(c.default,{text:a})))},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,[e]).catch(()=>{}),r.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(d.default,{title:h.default.t(192),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=p},bgedfbbhib:function(e,t){e.exports={header:"IEPZT"}},bhfbajceed:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("dfadhaifh")),r=s(a("hhegggegb")),o=s(a("ceffhbhahb")),l=a("bbfhhgaajc"),d=i(a("ddhijeejag")),c=s(a("jigjfjjij")),u=s(a("ebicahbfai")),h=s(a("bacefjjjdb")),f=i(a("bjdccffhaj")),p=s(a("ccbgfecegc")),m=s(a("ebcfjdcbhh")),g=s(a("bbfjdcedab")),b=a("ihfehgab"),v=s(a("hgigjbgie")),E=s(a("dfjejeffdj")),j=s(a("gfebgebbi")),C=s(a("eiighchhi")),M=a("bgddggdhc"),_=a("bjegcccgec"),S=s(a("ddbeddiehf")),T=a("dhegcfddhg"),y=a("gaifbabbj"),P=s(a("bdjjabfecc")),N=s(a("dcjigehfeb")),I=s(a("dhbjadiajj")),k=s(a("ddbeaiefad")),A=s(a("dajceebgdj")),D=s(a("cfccehgdic")),R=s(a("chihecbaj")),O=s(a("cahecebagf")),x=s(a("bdcchebfge")),L=s(a("djcajecjgh")),w=s(a("difhgjjfcb")),G=a("deffjjfcba"),F=s(a("dcdbbhicce")),U=a("cjfegjecaj"),B=a("hjbbdjjdf"),W=s(a("cgjdibiahi")),V=s(a("bcifhbgija")),H=s(a("ecfabjjeda"));function q(){var e=(0,n.default)(["type: ",""]);return q=function(){return e},e}class Y extends d.PureComponent{constructor(e){super(e),this.setMediaImage=e=>{this.mediaImage=e},this.setMediaVideo=e=>{this.mediaVideo=e},this.onImageLoad=e=>{this.props.onImageLoad&&this.props.onImageLoad();var t=this.state.zoomElement;t&&e&&this.props.zoomIn&&e instanceof HTMLElement&&(this.zoomed||(this.zoomed=!0,this.animateZoom(t,e)))},this.animateZoom=(e,t)=>{var a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=i.top-a.top,n=i.left-a.left,r=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,n-=(t.clientWidth-e.clientWidth)/2,(0,V.default)(t,{opacity:[1,0],translateX:[0,n],translateY:[0,s],scale:[1,r]},{duration:v.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});var o=(0,M.forbiddenFindDOMNode)(this.caption);o&&(0,V.default)(o,{opacity:[1,0]},{duration:v.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.openForwardFlow=e=>{e.stopPropagation();var{msg:t}=this.props;t.isUnsentMedia?p.default.openModal(d.createElement(g.default,{title:P.default.t(572),onOK:()=>p.default.closeModal(),okText:P.default.t(1579)},P.default.t(569))):p.default.openModal(d.createElement(S.default,{msgs:[(0,U.unproxy)(t)]}),{transition:"modal-flow"})},this.onReplyClick=()=>{this.onClose(),(0,l.delayMs)(v.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(()=>{var e=(0,U.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,p.default.focusChatTextInput(t)})},this.onDeleteClick=()=>{var{msg:e}=this.props;p.default.openModal(d.createElement(E.default,{chat:e.chat,msgList:[(0,U.unproxy)(e)],deletePrompt:!0,revokePrompt:e.canRevoke()}))},this.onMsgInfoClick=()=>{this.onClose(),(0,l.delayMs)(v.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(()=>{p.default.msgInfoDrawer((0,U.unproxy)(this.props.msg))})},this.onScroll=e=>{Math.abs(e.deltaY)>7&&this.onClose()},this.onImgZoomIn=e=>{var t=this.mediaImage;e&&t&&(this.listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this.onZoomOut=e=>{var t=this.mediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this.onMouseMove=e=>{this.handleMouseMove(e.pageX,e.pageY)},this._handleMouseMove=(e,t)=>{if(!this.state.annotationTooltipDisplayed){var a=this.mediaImage;if(a){var i=a.image;if(i){var s=(0,M.forbiddenAssertDOMNode)(i);if(s){var n=s.parentNode,r=n.parentNode,{translateX:o,translateY:l}=a.getTranslatePosition(r,e,t);(0,V.default)(n,"stop"),(0,V.default)(n,{translateX:o,translateY:l,scale:v.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}}},this.onDownloadClick=e=>{e.stopPropagation(),C.default.initDownload((0,U.unproxy)(this.props.msg))},this.onStarClick=e=>{e.stopPropagation();var{msg:t}=this.props;p.default.sendStarMsgs(t.chat,[(0,U.unproxy)(t)])},this.onUnstarClick=e=>{e.stopPropagation();var{msg:t}=this.props;p.default.sendUnstarMsgs(t.chat,[(0,U.unproxy)(t)])},this.onGoToMsgClick=e=>{e.stopPropagation(),this.onClose(),p.default.existsDrawerRight(e=>{e&&2===m.default.column&&p.default.closeDrawerRight()});var{msg:t}=this.props,a=t.chat.getSearchContext((0,U.unproxy)(t));p.default.openChatAt(t.chat,a).then(e=>{e&&p.default.focusChatTextInput(t.chat)})},this.onClose=()=>{if(!this.closing){this.closing=!0,(0,B.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation();var e,t=this.props.getZoomNode&&this.props.getZoomNode(this.props.msg.id);if(!t)return this.props.onBack();if(this.props.mediaData.type===N.default.TYPE.IMAGE&&this.mediaImage?e=this.mediaImage.image:this.props.mediaData.isGif&&this.mediaVideo&&(e=this.mediaVideo.player),!e)return this.props.onBack();var a=(e=(0,M.forbiddenAssertDOMNode)(e)).getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.top-a.top,n=i.left-a.left,r=t.clientWidth/e.clientWidth;s-=(e.clientHeight-t.clientHeight)/2,n-=(e.clientWidth-t.clientWidth)/2,(0,V.default)(e,{translateX:[n,0],translateY:[s,0],scale:[r,1]},{duration:v.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(()=>{this.props.onBack()});var o=(0,M.forbiddenFindDOMNode)(this.caption);o&&(0,V.default)(o,{opacity:[0,1]},{duration:v.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},this.onAnnotationTooltipDisplay=()=>this.setState({annotationTooltipDisplayed:!0}),this.onAnnotationTooltipDismiss=()=>this.setState({annotationTooltipDisplayed:!1}),this.handleMouseMove=(0,r.default)(this._handleMouseMove,42),this.zoomed=!1,this.closing=!1,this.listenToMouseMove=!1;var t=e.mediaData.mediaStage===N.default.STAGE.RESOLVED&&e.zoomIn&&e.getZoomNode?e.getZoomNode(e.msg.id):null;this.state={zoomElement:t,imgZoomed:!1,annotationTooltipDisplayed:!1}}componentWillUnmount(){this.handleMouseMove.cancel()}render(){var e,t,{msg:a,mediaData:i}=this.props;switch(i.type){case N.default.TYPE.IMAGE:e=d.createElement(I.default,{msg:a,mediaData:i,key:a.id.toString(),onLoad:this.onImageLoad,onImgZoomIn:this.onImgZoomIn,onAnnotationTooltipDisplay:this.onAnnotationTooltipDisplay,onAnnotationTooltipDismiss:this.onAnnotationTooltipDismiss,ref:this.setMediaImage});break;case N.default.TYPE.VIDEO:e=d.createElement(Z,{msg:a,mediaData:i,key:a.id.toString(),onLoad:i.isGif?this.onImageLoad:null,startTime:this.props.startTime,onClose:this.onClose,ref:this.setMediaVideo});break;case N.default.TYPE.AUDIO:e=d.createElement(J,{mediaData:i,key:a.id.toString()});break;default:__LOG__(4,!1,new Error)(q(),i.type),SEND_LOGS("MediaViewerModal: unexpected media type")}var s=this.props.msgIndexInAlbum>=0&&this.props.albumSize>=0;if(a.caption||s){var n;if(s){var r={number:this.props.msgIndexInAlbum+1,totalNumber:this.props.albumSize};n=P.default.t(990,r)}var l=y.Configuration.Conversation({mentions:a.mentionMap(),links:a.getLinks(),trusted:!0}),c=this.props.zoomIn&&(i.isGif||i.type===N.default.TYPE.IMAGE),u=(0,o.default)(O.default.mediaCaption,{[O.default.captionHidden]:c});t=d.createElement(j.default,{className:u,formatters:l,ref:(0,T.GetRef)("caption",this),text:a.caption||n})}var h=(0,o.default)(O.default.media,{[O.default.mediaWithCaption]:!!t}),p=d.createElement("div",{className:(0,o.default)(O.default.btnMediaNext)},d.createElement(f.default,{type:f.ButtonType.Next,onClick:this.props.onNext||(e=>e&&e.stopPropagation()),onKeyDown:this.props.onNext||(e=>e&&e.stopPropagation()),disabled:!this.props.onNext||this.state.imgZoomed,theme:G.RoundTheme.Default})),m=d.createElement("div",{className:(0,o.default)(O.default.btnMediaPrev)},d.createElement(f.default,{type:f.ButtonType.Prev,onClick:this.props.onPrev||(e=>e&&e.stopPropagation()),onKeyDown:this.props.onPrev||(e=>e&&e.stopPropagation()),disabled:!this.props.onPrev||this.state.imgZoomed,theme:G.RoundTheme.Default})),g=(0,o.default)("overlay",O.default.mediaViewer,{[O.default.mediaViewerAnimate]:this.props.zoomIn,[O.default.cursorZoomOut]:this.state.imgZoomed}),b=this.state.imgZoomed?null:this.onScroll,v=this.state.imgZoomed?null:this.onClose,E=this.state.imgZoomed&&this.listenToMouseMove?this.onMouseMove:null,C=this.state.imgZoomed?this.onZoomOut:null;return d.createElement(W.default,{displayName:"MediaViewer",escapable:!0,requestDismiss:this.onClose},d.createElement("div",{className:g,"data-animate-media-viewer":!0,onClick:C,onMouseMove:E},d.createElement(A.default,{msg:a,mediaData:i,onGoToMsgClick:this.onGoToMsgClick,onReplyClick:this.onReplyClick,onUnstarClick:this.onUnstarClick,onStarClick:this.onStarClick,onDeleteClick:this.onDeleteClick,openForwardFlow:this.openForwardFlow,onDownloadClick:this.onDownloadClick,onMsgInfoClick:this.onMsgInfoClick,onClose:this.onClose,msgIndexInAlbum:this.props.msgIndexInAlbum}),d.createElement("div",{className:O.default.mediaContent,onWheel:b,onClick:v},m,d.createElement("div",{className:h},d.createElement(D.default,{msg:a,mediaData:i}),e,t),p)))}}Y.CONCERNS={msg:["id","star","isUnsentMedia","chat","caption","interactiveAnnotations"],mediaData:["mediaStage","type","isGif"]};var K=(0,F.default)(Y,Y.CONCERNS);t.default=K;class z extends d.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1},this.stopPropagation=e=>{e.stopPropagation()},this.handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){var{mediaData:t}=e;return(t.mediaStage===N.default.STAGE.RESOLVED||t.streamable&&t.isStreamable())&&t.fullWidth&&t.fullHeight?{size:z.getSize(t)}:null}static getSize(e){if(e.isGif){return e.fullWidth>=330?{width:e.fullWidth,height:e.fullHeight}:{width:330,height:330*e.fullHeight/e.fullWidth}}return e.fullWidth>=_.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:_.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia(!0,x.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER)}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var e,{msg:t,mediaData:a}=this.props,i=a.isGif,s=a.mediaStage===N.default.STAGE.RESOLVED||a.streamable&&a.isStreamable();if(s=s||t.isForcingRMR()){var n,r,o=P.default.t(1313);return!this.state.isFullscreenMode&&t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(n=d.createElement(c.default,{annotations:t.interactiveAnnotations})),r=i?d.createElement("div",{className:k.default.mediaViewerImg,ref:(0,T.GetRef)("player",this)},d.createElement(H.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0},o),n):d.createElement("div",{className:k.default.mediaViewerImg,onClick:this.stopPropagation},d.createElement(L.default,{ref:(0,T.GetRef)("player",this),msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this.handleFullscreenToggle,autoPlay:!0,type:b.PLAYER_TYPE.MEDIA_VIEWER,overlays:n})),d.createElement(w.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad},r)}return d.createElement(h.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a})}}z.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","preview","renderableUrl","streamable"]},z.defaultProps={startTime:0};var X=(0,F.default)(z,z.CONCERNS);class Z extends X{get player(){return this.getComponent().player}}class Q extends d.PureComponent{constructor(...e){super(...e),this.stopPropagation=e=>{e.stopPropagation()},this._renderAudioTag=e=>d.createElement(u.default,{url:e,className:O.default.mediaViewerAudio,onClick:this.stopPropagation,autoPlay:!0,controls:!0},P.default.t(218)),this._renderPlaceholder=()=>d.createElement("div",{className:O.default.imageAudio,onClick:this.stopPropagation})}render(){var{mediaData:e}=this.props;return d.createElement(R.default,{mediaData:e,placeholderRenderer:this._renderPlaceholder},this._renderAudioTag)}}Q.CONCERNS={mediaData:["mediaStage","renderableUrl"]};var J=(0,F.default)(Q,Q.CONCERNS)},biiiigbhdf:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return function e(t,a,i=(0,o.genId)()){var s=a.trim();if(!s)return Promise.reject(new c.ActionError);if(s===t.contact.name)return Promise.reject(new c.ActionError);var n=(0,h.sendSetGroupSubject)(t.id,s),f=t.contact.name,g=new o.ActionType(u.default.t(103)),b=n.then(()=>new o.ActionType(u.default.t(102,{subject:s}),{actionText:u.default.t(183),actionHandler:()=>e(t,f,i)})).catchType(d.ServerStatusCodeError,e=>{if(e.status>=400)return new o.ActionType(u.default.t(101))}).catch(()=>(__LOG__(3)(m()),new o.ActionType(u.default.t(101),{actionText:u.default.t(179),actionHandler:()=>e(t,s,i)})));return l.default.openToast(r.createElement(o.ActionToast,{id:i,initialAction:g,pendingAction:b})),n.then(e=>{if(!e._duplicate){var a={name:s};return(0,p.updateLocal)(t.contact.id,a).then(()=>{t.contact.set(a)})}}).catchType(d.ServerStatusCodeError,()=>{})}((0,f.unproxy)(e),t)};var n=s(a("dfadhaifh")),r=i(a("ddhijeejag")),o=a("dheeaichcj"),l=s(a("ccbgfecegc")),d=a("bgihjbde"),c=i(a("cajijabhgb")),u=s(a("bdjjabfecc")),h=a("babicefcfg"),f=a("cjfegjecaj"),p=a("dcjbdhhjge");function m(){var e=(0,n.default)(["models:chat:setSubject dropped"]);return m=function(){return e},e}},bijdgebdaf:function(e,t){e.exports={wrapper:"_1F7mk"}},bjgjggcbjf:function(e,t){e.exports={label:"_3Fas3",input:"_5eHZa"}},bjhgfifchg:function(e,t){e.exports={header:"_2zQjm",chevronIcon:"_1LKBy",ephemeralIcon:"_14zYM"}},cajaabjdhb:function(e,t,a){"use strict";var i=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.minutesToTime=function(e){return s.default.utc().startOf("day").add(e,"minutes").format(n.default.timestampStrFormat())},t.timeStringToMinutes=void 0;var s=i(a("dgdjiicfdg")),n=i(a("cfadcbbiie")),r=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];t.timeStringToMinutes=e=>{var t,a=e.trim();if(a){for(var i of r){var n=(0,s.default)(a,i,!0);if(n.isValid()){t=n;break}}if(t){var o=(0,s.default)().startOf("day"),l=t.diff(o);return s.default.duration(l).asMinutes()}}}},cajgbiifbe:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=a("dfdebdgdei"),o=i(a("bgfcjjddjf")),l=i(a("bfdjaabbje")),d=i(a("ejegihaeh")),c=i(a("deccgghbae")),u=i(a("dbdfbgehgj")),h=i(a("ccbgfecegc")),f=i(a("cebjjhdbec")),p=i(a("bbfjdcedab")),m=i(a("daghgbcch")),g=s(a("hhcjfgifh")),b=i(a("dahagdijgh")),v=i(a("gaeccibgi")),E=i(a("bjheffjbgd")),j=i(a("cciafahdib")),C=s(a("bjjhgjdbhd")),M=i(a("ddeefhbafc")),_=i(a("gfebgebbi")),S=i(a("ddbhiaeibf")),T=i(a("dbfjeecgih")),y=i(a("bhbdiadfhj")),P=i(a("jheedhagg")),N=a("dfhgeaeig"),I=i(a("chhebaafhb")),k=i(a("bdjjabfecc")),A=i(a("cbedabhaa")),D=i(a("ebddggeaib")),R=i(a("dbbhcaicgf")),O=i(a("cdicaaigga")),x=i(a("bdcchebfge")),L=i(a("bdaddecbdh")),w=i(a("gjbhafcjg")),G=i(a("dcbcigbda")),F=i(a("biibicegh")),U=i(a("dhccahhefj")),B=i(a("cbjebbghea")),W=a("cbhhehcjbb"),V=a("dcbafbaejf"),H=i(a("dcdbbhicce")),q=i(a("dadjidbecc")),Y=i(a("dgdcjccfdi")),K=a("dhhjhedjij"),z=i(a("bcagigidbd")),X=i(a("djbfhebjhe"));class Z extends n.Component{constructor(e){super(e),this.flatListController=new T.default,this.ProductCatalogSession=new F.default,this._init=()=>{y.default.supportsFeature(y.default.F.QUERY_IDENTITY)&&!y.default.supportsFeature(y.default.F.MD_BACKEND)&&(0,N.queryIdentity)(this.props.contact)},this.onBlocklistChange=()=>{this.state.contactIsBlocked!==!!o.default.get(this.props.contact.id)&&this.setState({contactIsBlocked:!!o.default.get(this.props.contact.id)})},this.onDeleteChat=()=>{var e=u.default.assertGet(this.props.contact.id);h.default.deleteOrExitChat(e)},this.onBlockContact=()=>{var e=n.createElement(w.default,{contact:this.props.contact});h.default.openModal(n.createElement(p.default,{onOK:this.blockContact,okText:k.default.t(245),onCancel:()=>h.default.closeModal(),cancelText:k.default.t(1431)},n.createElement(A.default,{id:246,params:{contact:e}})))},this.onReportSpam=()=>{h.default.openModal(n.createElement(B.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>h.default.closeModal()}))},this.reportSpam=()=>{var e=u.default.get(this.props.contact.id);e&&(0,V.sendSpamReport)(e),h.default.closeModal()},this.reportSpamBlockClear=()=>{var e=u.default.get(this.props.contact.id);e&&(0,V.sendSpamBlockClear)(e),h.default.closeModal()},this.onUnblockContact=()=>{var e=n.createElement(w.default,{contact:this.props.contact});h.default.openModal(n.createElement(p.default,{okText:k.default.t(1255),onOK:this.unblockContact,cancelText:k.default.t(1431),onCancel:()=>h.default.closeModal()},n.createElement(A.default,{id:1256,params:{contact:e}})))},this.blockContact=()=>{(0,r.blockContact)(this.props.contact),h.default.closeModal()},this.unblockContact=()=>{(0,r.unblockContact)(this.props.contact),h.default.closeModal()},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onViewPicture=e=>{if(this.canViewPicture){var t=e.target;h.default.openModalMedia(n.createElement(G.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})}},this.onDetailImageLoad=()=>{this.canViewPicture=!0},this.canViewPicture=!1,this.state={contactIsBlocked:!!o.default.get(e.contact.id)}}componentDidMount(){this.props.listeners.add(o.default,"add remove reset sync",this.onBlocklistChange),this.props.listeners.uiIdle(this._init);var{contact:e}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&d.default.findCarouselCatalog(e.id),y.default.supportsFeature(y.default.F.MD_BACKEND)}shouldRenderCatalog(){var{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}renderProductCatalogSection(){if(!this.shouldRenderCatalog())return null;var{contact:e,onProductCatalog:t,onProductDetail:a}=this.props,i=d.default.get(e.id);return i?n.createElement(c.default,{onProductDetail:a,onProductCatalog:t,catalog:i,sessionId:this.ProductCatalogSession.toString(),entryPoint:x.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE}):null}render(){var e,t=this.props.contact,a=n.createElement(f.default,{contact:this.props.contact,onClose:this.onClose,flatListController:this.flatListController}),i=u.default.get(t.id);i&&(e=n.createElement(M.default,null,n.createElement(j.default,{a8nText:"li-delete-chat",icon:n.createElement(Y.default,{name:"delete"}),color:"danger",onClick:this.onDeleteChat},k.default.t(459))));var s=null;s=this.state.contactIsBlocked?n.createElement(M.default,null,n.createElement(j.default,{a8nText:"li-unblock",color:"success",icon:n.createElement(Y.default,{name:"settings-blocked",directional:!0}),onClick:this.onUnblockContact},k.default.t(1255))):n.createElement(M.default,null,n.createElement(j.default,{a8nText:"li-block",icon:n.createElement(Y.default,{name:"settings-blocked",directional:!0}),onClick:this.onBlockContact},k.default.t(245)));var r=n.createElement(M.default,null,n.createElement(j.default,{a8nText:"li-report-spam",color:"danger",icon:n.createElement(Y.default,{name:"thumbs-down",directional:!0}),onClick:this.onReportSpam},t.isBusiness?k.default.t(1089):k.default.t(1092))),o=null;if(this.props.onMediaGallery&&i){var d=this.props.onMediaGallery,c=n.createElement(Y.default,{className:m.default.chevron,name:"chevron-right-alt",directional:!0}),h=y.default.supportsFeature(y.default.F.LINK_DOC_GALLERY)?k.default.t(811):k.default.t(808);o=n.createElement(M.default,{a8nText:"section-media",title:h,titleOnClick:d,subtitle:c,theme:"padding"},n.createElement(O.default,{chat:i,mediaMsgs:i.getMediaMsgs()}))}var p=null;y.default.supportsFeature(y.default.F.LIVE_LOCATIONS)&&i&&(p=n.createElement(R.default,{chat:i,onClick:this.props.onLiveLocation}));var T=this.renderProductCatalogSection(),P=i&&i.mute.canMute()?n.createElement(L.default,{chat:i,mute:i.mute}):null,N=null;if(this.props.onStarred){var A=n.createElement(Y.default,{className:m.default.chevron,name:"chevron-right-alt",directional:!0});N=n.createElement(v.default,{a8nText:"block-starred-messages",side:A,onClick:this.props.onStarred},n.createElement(K.TextSpan,{theme:"title"},k.default.t(401)))}var D=i&&i.shouldShowEphemeralSetting()?n.createElement(S.default,{onClick:this.props.onEphemeral,chat:i}):null,x=null,G=i&&i.getReceivedVcardMsgs();if(y.default.supportsFeature(y.default.F.INDEX_RECEIVED_VCARD)&&G&&G.length){var F=n.createElement(Y.default,{className:m.default.chevron,name:"chevron-right-alt",directional:!0});x=n.createElement(v.default,{a8nText:"block-contact-card",side:F,onClick:this.props.onContactCard},n.createElement(K.TextSpan,{theme:"title"},k.default.t(445,{_plural:G.length})))}var U=null;(P||N||D||x)&&(U=n.createElement(M.default,null,P,N,D,x,null));var B=n.createElement(v.default,{multiline:!0},n.createElement(K.TextSpan,{theme:"title"},n.createElement(q.default,{id:t.id}))),V=n.createElement(v.default,null,n.createElement(W.SelectableSpan,{dir:"auto",selectable:!0},n.createElement(K.TextSpan,{theme:"title"},(0,X.default)(t.id)))),H=n.createElement(M.default,{a8nText:"section-about-and-phone-number"},n.createElement("div",{className:m.default.titleAbout},n.createElement(K.TextSpan,{theme:"section-title"},k.default.t(446))),B,V),Z=i&&i.presence?n.createElement(z.default,{contact:t,presence:i.presence,chatstate:i.presence.chatstate,location:"info"}):null,Q=t.showBusinessCheckmarkAsSecondary&&y.default.supportsFeature(y.default.F.VNAME_V_2)?n.createElement("div",{className:m.default.businessVname},n.createElement(_.default,{text:t.verifiedName,direction:"auto"}),n.createElement("div",{className:m.default.icon},n.createElement(Y.default,{name:"psa-verified"}))):null,J=t.isBusiness&&t.businessProfile?n.createElement(l.default,{contact:t,businessProfile:t.businessProfile}):null,$=!t.name&&t.notifyName?n.createElement("div",{className:m.default.nameSecondary},n.createElement(K.TextSpan,{theme:"muted"},n.createElement(_.default,{className:m.default.screenName,direction:"auto",text:t.notifyName,selectable:!0}))):null;return n.createElement(b.default,{key:"contact-info-modal",theme:"striped"},n.createElement(C.default,{title:k.default.t(1442),type:C.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),n.createElement(E.default,{flatListControllers:[this.flatListController]},n.createElement("div",{className:m.default.body},n.createElement(M.default,{theme:"padding-large"},n.createElement("div",{className:m.default.avatar},n.createElement(g.default,{id:t.id,size:g.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:this.onDetailImageLoad,onClick:this.onViewPicture,quality:g.DETAIL_IMAGE_QUALITY.HIGH})),n.createElement(K.TextSpan,{theme:"large"},n.createElement(w.default,{contact:t,selectable:!0,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary})),$,n.createElement("div",{className:m.default.nameSecondary},n.createElement(K.TextSpan,{theme:"muted"},Q),n.createElement(K.TextSpan,{theme:"muted"},Z)),n.createElement(I.default,{labels:t.labels})),J,p,T,o,U,H,null,a,s,r,e)))}}Z.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","name","notifyName","labels","businessCatalog"]};var Q=(0,P.default)((0,U.default)((0,D.default)((0,H.default)(Z,Z.CONCERNS))));t.default=Q},cajhjbjeea:function(e,t){e.exports={body:"IKcGX",photo:"_2oK2J",chevron:"e7Sch"}},cbedcfgdae:function(e,t){e.exports={body:"_LNcL",avatar:"_1wLdx",description:"_2fh-m",nameSecondary:"_13BQq",chevron:"_26SUi",iconSearch:"_1azsy",dogfoodingGroupBannerInternalOnly:"_2WJBJ"}},ccbjchaaad:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("dfadhaifh")),r=i(a("ddhijeejag")),o=s(a("effbcehec")),l=s(a("bgdcbcbibj")),d=s(a("baaafjdcde")),c=s(a("cefccdiabc")),u=s(a("dbdfbgehgj")),h=s(a("cfadcbbiie")),f=s(a("ccbgfecegc")),p=s(a("bbfjdcedab")),m=s(a("hgigjbgie")),g=s(a("dahagdijgh")),b=s(a("gaeccibgi")),v=s(a("bjheffjbgd")),E=s(a("cciafahdib")),j=i(a("bjjhgjdbhd")),C=s(a("ddeefhbafc")),M=s(a("dgebcfedgb")),_=s(a("baijfhbiei")),S=s(a("gfebgebbi")),T=s(a("gijfafhh")),y=s(a("ddbhiaeibf")),P=i(a("cajijabhgb")),N=i(a("bgheieccaj")),I=s(a("dbfjeecgih")),k=a("ddbdgibbbi"),A=s(a("bhbdiadfhj")),D=s(a("cbedcfgdae")),R=s(a("dfhcaiigfg")),O=s(a("jheedhagg")),x=a("gaifbabbj"),L=s(a("chhebaafhb")),w=s(a("bdjjabfecc")),G=i(a("dbcedfihd")),F=s(a("ebddggeaib")),U=s(a("dbbhcaicgf")),B=s(a("cdicaaigga")),W=a("cgjcdbggeb"),V=s(a("bdaddecbdh")),H=s(a("dcccbfbehi")),q=s(a("hajhefagc")),Y=s(a("cfcfdeifjb")),K=a("bbbdgehigj"),z=s(a("dhccahhefj")),X=s(a("cbjebbghea")),Z=s(a("efedbfchg")),Q=a("dcbafbaejf"),J=s(a("bfgbdiffgd")),$=a("hjbhabfd"),ee=a("biiiigbhdf"),te=s(a("dcdbbhicce")),ae=a("cjfegjecaj"),ie=s(a("ebijbjhdie")),se=s(a("dgdcjccfdi")),ne=a("dhhjhedjij"),re=i(a("dbihaeaggd")),oe=i(a("bjhgigfbec")),le=s(a("cgjdibiahi")),de=s(a("dfciadajdf")),ce=s(a("jccfhaecf"));function ue(){var e=(0,n.default)(["group_info_drawer:onSetDescription failed"]);return ue=function(){return e},e}function he(){var e=(0,n.default)(["group_info_drawer:onSetSubject failed"]);return he=function(){return e},e}function fe(){var e=(0,n.default)(["GroupInfoDrawer: failed to set/delete group image"]);return fe=function(){return e},e}var pe=(0,oe.genId)("max_participant_toast");class me extends r.Component{constructor(e){super(e),this.participantFlatListController=new I.default,this.pendingParticipantFlatListController=new I.default,this.updateGroupDescOnModelChange=()=>{this.props.groupMetadata&&this.setState({groupDesc:this.props.groupMetadata.desc})},this.onImageSet=(e,t)=>{var a=this.props.profilePicThumb;this.setState({pendingPhoto:!0}),(e&&t?(0,K.setProfilePic)(a,e,t):(0,K.deleteProfilePic)(a)).checkpoint(this.props.rejectOnUnmount()).catchType(P.Unmount,()=>{}).catchType(P.ActionError,()=>{__LOG__(3)(fe()),this.setState({resetPhotoPicker:!this.state.resetPhotoPicker})}).finally(()=>{this.setState({pendingPhoto:!1})})},this.onParticipantClick=(e,t)=>{ce.default.equals((0,k.getMaybeMeUser)(),t.id)||u.default.find(t.id).then(e=>{f.default.openChatFromUnread(e).then(t=>{t&&f.default.focusChatTextInput(e)})})},this.menuEnabled=e=>{var t=this.props.groupMetadata.participants,a=t.get(e.id);return!!a&&(t.canPromote(a)||t.canRemove(a)||t.canVerifyIdentity(a))},this.onDemoteAdmin=e=>{e.contact.pendingAction++,(0,W.demoteParticipants)(this.props.chat,[e]).then(()=>{e.contact.pendingAction--}),this.setState({contextMenu:null})},this.onParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.participants,i=a.assertGet(t.id);if(this.menuEnabled(t)){var s=[];if(a.canPromote(i)){var n=this.confirmParticipantPromote.bind(this,i);s.push(r.createElement(M.default,{a8n:"mi-grp-promote-admin",key:"promote",action:n},w.default.t(819)))}if(a.canRemove(i)){var o=this.confirmParticipantRemove.bind(this,i);s.push(r.createElement(M.default,{a8n:"mi-grp-remove-participant",key:"remove",action:o},w.default.t(823)))}if(A.default.supportsFeature(A.default.F.GROUPS_V_3)&&a.canDemote(i)){var l=this.onDemoteAdmin.bind(this,i);s.push(r.createElement(M.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:l},w.default.t(480)))}e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:s,anchor:e.anchor,event:e.event}})}},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.confirmParticipantRemove=e=>{var t=this.onParticipantRemove.bind(this,e,!0),a=w.default.t(431,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal(r.createElement(p.default,{onOK:t,okText:w.default.t(1081),onCancel:()=>f.default.closeModal(),cancelText:w.default.t(1431)},r.createElement(S.default,{text:a})))},this.onParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,W.removeParticipants)(this.props.chat,[e]).then(()=>{e.contact.pendingAction--}),t&&f.default.closeModal()},this.confirmParticipantPromote=e=>{var t=this.onParticipantPromote.bind(this,e,!0),a=w.default.t(430,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal(r.createElement(p.default,{onOK:t,okText:w.default.t(819),onCancel:()=>f.default.closeModal(),cancelText:w.default.t(1431)},r.createElement(S.default,{text:a})))},this.onParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,W.promoteParticipants)(this.props.chat,[e]).then(()=>{e.contact.pendingAction--}),t&&f.default.closeModal()},this.openAddGroupParticipantFlow=()=>{var{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=J.default.maxParticipants){var t=w.default.t(77,{max:J.default.maxParticipants});f.default.openToast(r.createElement(oe.default,{msg:t,id:pe}))}else{var a=A.default.supportsFeature(A.default.F.GROUPS_V_3)?r.createElement(d.default,{chat:(0,ae.unproxy)(e),pushTransition:"none",popTransition:"none"}):r.createElement(l.default,{chat:(0,ae.unproxy)(e),pushTransition:"none",popTransition:"none"});f.default.openModal(a,{transition:"modal-flow"})}},this.openParticpantSearch=()=>{f.default.openModal(r.createElement(R.default,{chat:(0,ae.unproxy)(this.props.chat),onParticipantPromote:this.onParticipantPromote,onParticipantRemove:this.onParticipantRemove,onDemoteAdmin:this.onDemoteAdmin}),{transition:"modal-flow"})},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onExitOrDeleteGroup=()=>{f.default.deleteOrExitChat(this.props.chat)},this.onSubjectChange=e=>{this.setState({name:e})},this.onGroupDescChange=e=>{this.setState({groupDesc:e})},this.validateSubject=e=>!(!e||!e.trim()),this.onSetSubjectError=()=>{f.default.openModal(r.createElement(p.default,{onOK:()=>f.default.closeModal(),okText:w.default.t(1579)},w.default.t(104)))},this.onSetSubject=()=>{var e=this.props.chat;if(this.props.groupMetadata.canSetSubject()){var t=(0,T.default)(this.state.name||"");if(t===this.props.contact.name)return this.setState({name:t});this.setState({pendingSubject:!0}),(0,ee.setGroupSubject)(e,t).then(()=>{this.setState({name:this.props.contact.name,pendingSubject:!1})}).catchType(P.Unmount,()=>{}).catch(()=>{__LOG__(3)(he()),this.setState({name:this.props.contact.name,pendingSubject:!1})})}},this.onSetDescription=()=>{var{chat:e,groupMetadata:t}=this.props;if(t.canSetDescription()){var a=this.state.groupDesc||"",i=a.match(/\r\n/gm)?"\r\n":"\n",s=new RegExp("^(".concat(i,"{2,})([^\n])"),"gm");a=a.replace(s,"".concat(i,"$2"));var n=(0,T.default)(a||"");if(n===t.desc)return this.setState({groupDesc:n});this.setState({pendingDesc:!0}),(0,$.setGroupDesc)(e,n).then(()=>{this.setState({groupDesc:t.desc,pendingDesc:!1})}).catchType(P.Unmount,()=>{}).catch(()=>{__LOG__(3)(ue()),this.setState({groupDesc:this.props.groupMetadata.desc,pendingDesc:!1})})}},this.onCancelSubject=()=>{this.setState({name:this.props.contact.name})},this.onCancelDesc=()=>{this.setState({groupDesc:this.props.groupMetadata.desc})},this.showSecurityInfoPopup=()=>{f.default.openModal(r.createElement(_.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.onShowMore=()=>{this.setState({participantListCollapsed:!1})},this.onShowMorePendingParticipants=()=>{this.setState({pendingParticipantListCollapsed:!1})},this.renderItem=e=>{var{id:t}=e,a=this.props.groupMetadata.participants.get(t);if(!a)throw new N.UnknownDataError(e);var i=a.contact,s=!!this.state.contextMenu&&ce.default.equals(i.id,this.state.contextMenu.contactId);return r.createElement(H.default,{contact:i,participant:a,key:a.id.toString(),onClick:this.onParticipantClick,contextEnabled:this.menuEnabled.bind(this,i),contextMenu:s,onContext:e=>this.onParticipantMenu(e,i),showNotifyName:!0,waitIdle:!0})},this.onReportSpam=()=>{f.default.openModal(r.createElement(X.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>f.default.closeModal()}))},this.reportSpam=()=>{(0,Q.sendSpamReport)(this.props.chat),f.default.closeModal()},this.reportSpamExitClear=()=>{(0,Q.sendSpamExitClear)(this.props.chat),f.default.closeModal()},this.onDescriptionReadMore=()=>{this.setState({descTruncated:!1})},this.showEditRestrictionInfo=()=>{f.default.openModal(r.createElement(p.default,{onOK:()=>f.default.closeModal(),okText:w.default.t(1579)},w.default.t(997)))},this.revokeGrpV4Invite=e=>{f.default.openModal(r.createElement(p.default,{onOK:()=>{f.default.closeModal(),this.props.groupMetadata.revokeGroupV4AddInvite([e.id.toString()]).then(()=>{f.default.openToast(r.createElement(oe.default,{msg:w.default.t(1546),id:(0,oe.genId)()}))})},okText:w.default.t(1637),onCancel:()=>f.default.closeModal(),cancelText:w.default.t(1431)},r.createElement(S.default,{text:w.default.t(679,{participant:e.contact.formattedName})})))},this.renderPendingParticipantItem=e=>{var{id:t}=e,a=this.props.groupMetadata.pendingParticipants.get(t);if(!a)throw new N.UnknownDataError(e);var i=a.contact;return r.createElement(H.default,{contact:i,participant:a,key:a.id.toString(),contextEnabled:()=>!0,contextMenu:!0,onContext:e=>this.onPendingParticipantMenu(e,i),showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0})},this.onPendingParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.pendingParticipants.assertGet(t.id),i=[r.createElement(M.default,{a8n:"mi-grp-promote-admin",key:"promote",action:this.revokeGrpV4Invite.bind(this,a)},w.default.t(1117))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.event}})};var{groupMetadata:{desc:t,participants:a,pendingParticipants:i},showFullGroupDescription:s}=this.props;this.state={pendingSubject:!1,pendingDesc:!1,pendingPhoto:!1,contextMenu:null,name:e.contact.name,groupDesc:t,descTruncated:!s&&!!(t&&t.length>30),participantListCollapsed:a.length>m.default.INFO_DRAWER_MAX_ROWS,pendingParticipantListCollapsed:i.length>m.default.INFO_DRAWER_MAX_ROWS,resetPhotoPicker:!1}}componentDidMount(){var e=this.props.groupMetadata;A.default.supportsFeature(A.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.queryGroupV4PendingInvite(),this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",()=>{this.forceUpdate()}),this.props.listeners.add(e.pendingParticipants,"add remove reset",()=>{this.forceUpdate()}),this.props.listeners.add(e,"change:desc",()=>{this.updateGroupDescOnModelChange()}),this.ensureParticipantsSorted()}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted(),this.props.groupMetadata.pendingParticipants.ensureSorted()}getData(){var e,t=[],a=[],i=this.props.groupMetadata.participants;i.forEach(i=>{i.contact.isMe?e=i:i.isAdmin?t.push(i):a.push(i)});var s=[];return e&&s.push(e),s=s.concat(t,a),i.length>m.default.INFO_DRAWER_MAX_ROWS&&this.state.participantListCollapsed&&(s=s.slice(0,m.default.INFO_DRAWER_MAX_ROWS)),s.map(e=>({itemKey:e.id.toString(),id:e.id}))}getPendingParticipantListData(){var e=this.props.groupMetadata.pendingParticipants.toArray(),t=[...e];return e.length>m.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed&&(t=t.slice(0,m.default.INFO_DRAWER_MAX_ROWS)),t.map(e=>({itemKey:e.id.toString(),id:e.id}))}getTitle(){return A.default.supportsFeature(A.default.F.LINK_DOC_GALLERY)?J.default.productMediaAttachments?w.default.t(812):w.default.t(811):w.default.t(808)}render(){var e,t,a,i,s,n,l,d=this.props.chat,u=this.props.groupMetadata,f=r.createElement(C.default,null,r.createElement(E.default,{a8nText:"li-delete-group",icon:r.createElement(se.default,{name:"exit",directional:!0}),theme:"list-aligned",color:"danger",onClick:this.onExitOrDeleteGroup},d.isReadOnly?w.default.t(1468):w.default.t(1474)));if(d.isReadOnly||(e=r.createElement(C.default,null,r.createElement(E.default,{a8nText:"li-report-spam",theme:"list-aligned",color:"danger",icon:r.createElement(se.default,{name:"thumbs-down",directional:!0}),onClick:this.onReportSpam},w.default.t(1095)))),u.participants.canAdd()&&!u.support){var p=r.createElement(Z.default,null,r.createElement(se.default,{name:"add-user",directional:!0}));t=r.createElement(c.default,{image:p,theme:"drawer-list",primary:w.default.t(192),onClick:this.openAddGroupParticipantFlow})}if(u.participants.iAmAdmin()&&this.props.onGroupInviteLink&&!u.support){var M=r.createElement(Z.default,null,r.createElement(se.default,{name:"link"}));a=r.createElement(c.default,{image:M,theme:"drawer-list",primary:w.default.t(641),onClick:this.props.onGroupInviteLink})}if(u.participants.length>m.default.INFO_DRAWER_MAX_ROWS&&this.state.participantListCollapsed){var _=u.participants.length-m.default.INFO_DRAWER_MAX_ROWS,S=r.createElement(Z.default,{theme:"transparent"},r.createElement(se.default,{name:"down"}));i=r.createElement(c.default,{image:S,theme:"drawer-list",primary:w.default.t(667,{count:_,_plural:_}),onClick:this.onShowMore})}if(u.pendingParticipants.length>m.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed){var T=u.pendingParticipants.length-m.default.INFO_DRAWER_MAX_ROWS,P=r.createElement(Z.default,{theme:"transparent"},r.createElement(se.default,{name:"down"}));s=r.createElement(c.default,{image:P,theme:"drawer-list",primary:w.default.t(667,{count:T,_plural:T}),onClick:this.onShowMorePendingParticipants})}if(u.pendingParticipants.length>0&&(n=r.createElement(N.default,{flatListController:this.pendingParticipantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getPendingParticipantListData(),renderItem:this.renderPendingParticipantItem})),u.participants.iAmAdmin()&&A.default.supportsFeature(A.default.F.GROUPS_V_3)&&!u.support){var I=r.createElement(se.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0});l=r.createElement(b.default,{onClick:this.props.onAdminSetting,side:I},r.createElement(ne.TextSpan,{theme:"title"},w.default.t(665)))}var k,R=r.createElement(se.default,{name:"search",className:D.default.iconSearch}),O=u.participants.length?r.createElement(C.default,{a8nText:"section-participants",title:w.default.t(1581,{count:u.participants.length,_plural:u.participants.length}),titleOnClick:A.default.supportsFeature(A.default.F.GROUPS_V_3)?this.openParticpantSearch:void 0,subtitle:A.default.supportsFeature(A.default.F.GROUPS_V_3)?R:void 0},t,a,r.createElement(N.default,{flatListController:this.participantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),i):null;u.participants.iAmAdmin()&&u.pendingParticipants.length>0&&(k=r.createElement(C.default,{a8nText:"section-participants",title:w.default.t(671,{number:u.pendingParticipants.length})},n,s));var F=null;if(this.props.onMediaGallery){var W=this.props.onMediaGallery,H=r.createElement(se.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0}),K=this.getTitle();F=r.createElement(C.default,{a8nText:"section-media",title:K,titleOnClick:W,subtitle:H,theme:"padding"},r.createElement(B.default,{chat:(0,ae.unproxy)(d),mediaMsgs:d.getMediaMsgs()}))}var z=this.props.contact.profilePicThumb,X=Y.default.GROUP,Q=d.isReadOnly||!z.canDelete()&&!z.canSet()||d.isSupportGroup(),$=r.createElement("div",{className:D.default.avatar},r.createElement(q.default,{key:String(this.state.resetPhotoPicker),type:X,id:this.props.contact.id,attachToChat:!0,pending:this.state.pendingPhoto,startImage:this.props.profilePicThumb.imgFull,readOnly:Q,onImageSet:this.onImageSet})),ee=null;this.props.groupMetadata.creation&&(ee=r.createElement("div",{"data-a8n":o.default.key("group-created-time"),className:D.default.nameSecondary},r.createElement(ne.TextSpan,{theme:"muted"},h.default.createdStr(this.props.groupMetadata.creation))));var te=null;A.default.supportsFeature(A.default.F.LIVE_LOCATIONS)&&(te=r.createElement(U.default,{chat:d,onClick:this.props.onLiveLocation}));var oe=d&&d.shouldShowEphemeralSetting()?r.createElement(y.default,{onClick:this.props.onEphemeral,chat:d,groupMetadata:u}):null,ce=null;this.props.chat.isSupportGroup()&&(ce=r.createElement(ie.default,{onClick:this.showSecurityInfoPopup}));var ue,he=d.mute.canMute()?r.createElement(V.default,{chat:d,mute:d.mute}):null,fe=null;if(this.props.onStarred){var pe=r.createElement(se.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0});fe=r.createElement(b.default,{side:pe,onClick:this.props.onStarred},r.createElement(ne.TextSpan,{theme:"title"},w.default.t(401)))}this.state.contextMenu&&(ue=r.createElement(le.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},r.createElement(de.default,{contextMenu:this.state.contextMenu})));var me,ge=null;if((he||fe||ce||oe)&&(ge=r.createElement(C.default,null,he,fe,oe,ce,l)),A.default.supportsFeature(A.default.F.GROUPS_V_3)&&J.default.groupDescLength>0){var be=this.state.groupDesc||"",ve={textLimit:this.state.descTruncated?m.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:1/0,readMoreText:w.default.t(1079),onReadMore:this.onDescriptionReadMore,formatters:this.props.chat.isTrusted()?x.Configuration.TrustedGroupDesc({links:G.findLinks(be)}):x.Configuration.UntrustedGroupDesc()};me=r.createElement(C.default,{theme:"group-desc-padding",title:w.default.t(630)},r.createElement("div",{className:D.default.description},r.createElement(re.default,{a8n:"group-info-drawer-description-title-input",value:be,emptyValuePlaceholder:w.default.t(190),renderEmojiTextInLockMode:ve,editable:u.canSetDescription(),pending:this.state.pendingDesc,showRemaining:!0,maxLength:J.default.groupDescLength,onChange:this.onGroupDescChange,onSave:this.onSetDescription,onCancel:this.onCancelDesc,multiline:!0,editRestrictionInfo:u.restrict?this.showEditRestrictionInfo:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:[re.TextInputCustomStyleThemes.groupInfoName],theme:"small"})))}return r.createElement(g.default,{key:"contact-info-modal",theme:"striped"},r.createElement(j.default,{title:w.default.t(1502),type:j.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),r.createElement(v.default,{flatListControllers:[this.pendingParticipantFlatListController,this.participantFlatListController]},r.createElement("div",{className:D.default.body},null,r.createElement(C.default,{theme:"padding-large"},$,r.createElement(re.default,{a8n:"group-info-drawer-subject-input",value:this.state.name||"",editable:u.canSetSubject(),pending:this.state.pendingSubject,showRemaining:!0,validate:this.validateSubject,maxLength:J.default.maxSubject,onChange:this.onSubjectChange,onSave:this.onSetSubject,onError:this.onSetSubjectError,onCancel:this.onCancelSubject,editRestrictionInfo:u.restrict?this.showEditRestrictionInfo:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:[re.TextInputCustomStyleThemes.groupInfoName]}),ee,r.createElement(L.default,{labels:d.labels})),me,te,F,ge,null,O,k,f,e)),ue)}}me.CONCERNS={chat:["isReadOnly","mute","id","pendingAction","liveLocation","labels"],groupMetadata:["desc","participants","pendingParticipants","creation","restrict","announce","support"],contact:["name","id","profilePicThumb","pendingAction"],profilePicThumb:["imgFull"]};var ge=(0,O.default)((0,z.default)((0,F.default)((0,te.default)(me,me.CONCERNS))));t.default=ge},ccdaifjgfd:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("bacehaajgh")),r=s(a("dagbcgeifg")),o=i(a("ddhijeejag")),l=s(a("bdjjabfecc")),d=s(a("ebddggeaib")),c=s(a("bdjgdghiah"));class u extends o.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{productMsgs:a,chat:i}=this.props;this.props.listeners.uiIdle(()=>{a.queryProducts(i,t)})}}componentDidMount(){this.props.listeners.add(this.props.productMsgs,"add remove reset",()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})}render(){var e=this.props,{productMsgs:t,listeners:a}=e,i=(0,r.default)(e,["productMsgs","listeners"]);return o.createElement(c.default,(0,n.default)({ref:this._setGallery,msgsCollection:t,queryCollection:this._queryCollection,hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:l.default.t(982)},i))}}var h=(0,d.default)(u);t.default=h},ccigicfdgf:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("dfadhaifh")),r=s(a("hhegggegb")),o=i(a("ddhijeejag")),l=s(a("ccbgfecegc")),d=s(a("hgigjbgie")),c=i(a("cajijabhgb")),u=s(a("bdjjabfecc")),h=s(a("ebddggeaib")),f=s(a("dcjigehfeb")),p=s(a("bhfbajceed")),m=s(a("gifabeaga")),g=s(a("bdcchebfge")),b=s(a("cahfddcdga")),v=s(a("dhccahhefj")),E=s(a("bcifhbgija"));function j(){var e=(0,n.default)(["query media msgs error: "]);return j=function(){return e},e}function C(){var e=(0,n.default)(["query media msgs error: "]);return C=function(){return e},e}class M extends o.Component{constructor(e){super(e),this.onKeyDown=e=>{var t=u.default.isRTL();37===e.keyCode?t?this.onNext():this.onPrev():39===e.keyCode&&(t?this.onPrev():this.onNext())},this.onImageLoad=()=>{var{uiActionEvent:e}=this;e&&(e.markUiActionT(),e.commit(),delete this.uiActionEvent)},this.onScroll=e=>{this.handleScroll(e.currentTarget,this.mediaMsgs,e.currentTarget.scrollLeft,this.props.listeners)},this.onNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=this.mediaMsgs.getAfter(t);a?this.onSelectThumb(a):this.mediaMsgs.hasMediaAfter&&(this._queryMediaAfter||(this._queryMediaAfter=this.mediaMsgs.queryMedia(t.chat,t,"after").checkpoint(this.props.rejectOnUnmount()).then(e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.onNext()}).catchType(c.Unmount,()=>{}).catch(()=>{__LOG__(3)(C())}).finally(()=>{this._queryMediaAfter=null})))}}},this.onPrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=this.mediaMsgs.getBefore(t);a?this.onSelectThumb(a):this.mediaMsgs.hasMediaBefore&&(this._queryMediaBefore||(this._queryMediaBefore=this.mediaMsgs.queryMedia(t.chat,t,"before").checkpoint(this.props.rejectOnUnmount()).then(e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.onPrev()}).catchType(c.Unmount,()=>{}).catch(()=>{__LOG__(3)(j())}).finally(()=>{this._queryMediaBefore=null})))}}},this.onImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{l.default.closeModalMedia()},this.willEndFlow=()=>{var e;(e=this.refThumbsContainer)&&(0,E.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.onSelectThumb=e=>{this.props.listeners.uiIdle(()=>{this.mediaMsgs.loadMoreAroundIfNeeded(e)}),this.setState({activeMsg:e})},this.scrollToActive=(e=!1)=>{var t=this.refThumbsContainer,a=this.refThumbs,i=this.refActiveThumb;if(t&&a&&i){var s=0;i instanceof HTMLElement&&(s=i.clientWidth/2-t.clientWidth/2),(0,E.default)(a,"stop");var n=0;e&&(n=300),(0,E.default)(i,"scroll",{duration:n,container:a,offset:s,axis:"x",easing:[.1,.82,.25,1]})}},this.setRefActiveThumb=e=>{this.refActiveThumb=e},this.setRefThumbsContainer=e=>{this.refThumbsContainer=e},this.setRefThumbs=e=>{this.refThumbs=e},this.getActiveMsgIndexInAlbum=()=>{var e=-1,{highlightedMsgIds:t}=this.props;if(!t||!this.state.activeMsg)return e;var a=this.state.activeMsg.id.toString();if(!t.has(a))return e;var i=0;return t.forEach(t=>{t===a&&(e=i),i++}),e},this.zoomIn=!0,this.prevScrollWidth=null;var t=this.props.msg;this.mediaMsgs=t.chat.constructMediaMsgs(t),this.handleScroll=(0,r.default)(this._handleScroll.bind(this),100),t.type===d.default.MSG_TYPE.IMAGE&&(this.uiActionEvent=new g.default.UiAction({uiActionType:g.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:t.mediaData.mediaStage===f.default.STAGE.RESOLVED})),this.state={activeMsg:t,imgZoomed:!1}}componentDidMount(){var e;this.props.listeners.add(window,"keydown",this.onKeyDown),this.zoomIn=!1,this.addListeners.bind(this)(this.props.listeners,this.mediaMsgs,()=>this.state.activeMsg,this.onSelectThumb,this.endFlow),this.props.listeners.add(this.mediaMsgs,"query_media_before",()=>{var e=this.refThumbs;e&&(this.prevScrollWidth=e.scrollWidth,e instanceof HTMLElement&&this.forceUpdate())}),this.scrollToActive(),(e=this.refThumbsContainer)&&(0,E.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]})}addListeners(e,t,a,i,s){e.uiIdle(()=>{var e=a();e&&t.loadMoreAroundIfNeeded(e)}),e.add(t,"remove",(e,n,r)=>{var o=a();if(t.includes(e)||null!=o&&null!=o.id&&o.id.toString()!==e.id.toString())this.forceUpdate();else{var l=r.index;0===t.length?s():t.length===l?i(t.at(l-1)):i(t.at(l))}}),e.add(t,"reset",()=>{s()}),e.add(t,"query_media_after",()=>{this.forceUpdate()})}componentWillUnmount(){this.handleScroll.cancel()}componentDidUpdate(e,t){if(t.activeMsg!==this.state.activeMsg)this.scrollToActive(!0);else{var a=this.refThumbs;if(!a||null==this.prevScrollWidth||0===this.prevScrollWidth)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-this.prevScrollWidth),this.prevScrollWidth=null}}_handleScroll(e,t,a,i){if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){var s=(0,b.default)(t.head(),"mediaMsgs.head()");i.uiIdle(()=>{t.queryMedia(s.chat,s),this.forceUpdate()})}if(t.hasMediaAfter&&a+d.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){var n=(0,b.default)(t.last(),"mediaMsgs.last()");i.uiIdle(()=>{t.queryMedia(n.chat,n,"after"),this.forceUpdate()})}}}render(){var e,t=this.state.activeMsg;if(!t)return null;var a=this.mediaMsgs.last(),i=this.mediaMsgs.hasMediaAfter||this.state.activeMsg!==a?this.onNext:null,s=this.mediaMsgs.head(),n=this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==s?this.onPrev:null;return o.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},o.createElement(m.default,{activeMsg:t,mediaMsgs:this.mediaMsgs,highlightedMsgIds:this.props.highlightedMsgIds,onSelectThumb:this.onSelectThumb,onSetActiveThumb:this.setRefActiveThumb,onScroll:this.onScroll,setRefThumbsContainer:this.setRefThumbsContainer,setRefThumbs:this.setRefThumbs}),o.createElement(p.default,{msg:t,mediaData:t.mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:i,onPrev:n,onImgZoomIn:this.onImgZoomIn,getZoomNode:this.props.getZoomNode,startTime:this.props.startTime,zoomIn:this.zoomIn,onImageLoad:this.uiActionEvent?this.onImageLoad:null,msgIndexInAlbum:this.getActiveMsgIndexInAlbum(),albumSize:(null===(e=this.props.highlightedMsgIds)||void 0===e?void 0:e.size)||0}))}}var _=(0,v.default)((0,h.default)(M));t.default=_},cddegcdhjb:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TABS=void 0;var n=s(a("cehcfaibji")),r=s(a("ceffhbhahb")),o=i(a("ddhijeejag")),l=a("dheeaichcj"),d=s(a("dgjaedef")),c=s(a("dahagdijgh")),u=s(a("bjheffjbgd")),h=i(a("bjjhgjdbhd")),f=s(a("bhbdiadfhj")),p=s(a("bdjjabfecc")),m=s(a("cdfhcjheib")),g=s(a("cdicaaigga")),b=s(a("dcdhjeiaaf")),v=s(a("cfccjacgje")),E=s(a("dceicchccd")),j=s(a("ccdaifjgfd")),C=s(a("bfgbdiffgd")),M=s(a("cgjdibiahi")),_=s(a("didfdhbecg")),S={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};t.TABS=S;class T extends o.Component{constructor(){super(...arguments),this.state={selected:this.props.initialTab,direction:null,selectable:!1},this.onSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.onCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.onMessageSelect=(e,t)=>{this.onSelectMessages(),this.selectedMessages.setVal(e,t),0===this.selectedMessages.getSelected().length&&this.onCancelSelection()},this.selectedMessages=new E.default([],e=>e.id.toString())}onSelectTab(e){var t=(0,n.default)(S).indexOf(this.state.selected),a=(0,n.default)(S).indexOf(e);t!==a&&this.selectedMessages.unsetAll();var i=a>t?"right":"left";this.setState({selected:e,direction:i,selectable:!1})}getTabs(){if(!f.default.supportsFeature(f.default.F.LINK_DOC_GALLERY))return null;var e=[{tab:S.MEDIA,title:p.default.t(808)},{tab:S.DOCS,title:p.default.t(481)},{tab:S.LINKS,title:p.default.t(749)}];C.default.productMediaAttachments&&e.push({tab:S.PRODUCTS,title:p.default.t(1060)});var t=e.map(e=>{var t=(0,r.default)(b.default.menuItem,{[b.default.active]:this.state.selected===e.tab});return o.createElement("button",{className:t,onClick:this.onSelectTab.bind(this,e.tab),key:e.tab,title:e.title},e.title)}),a=(0,r.default)(b.default.menuTabsLists,C.default.productMediaAttachments?b.default.fourTabs:b.default.threeTabs);return o.createElement("div",{className:a,"data-active-tab":this.state.selected},t)}getContent(){var e,t=this.props.chat;if(!f.default.supportsFeature(f.default.F.LINK_DOC_GALLERY))return o.createElement(g.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages,fullCollection:!0});switch(this.state.selected){case S.MEDIA:e=o.createElement(g.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages,fullCollection:!0});break;case S.LINKS:e=o.createElement(m.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages});break;case S.DOCS:e=o.createElement(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages});break;case S.PRODUCTS:e=o.createElement(j.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages,onProductDetail:this.props.onProductDetail,setScrollOffset:this.props.setProductsScrollOffset,scrollOffset:this.props.productsScrollOffset})}return e}render(){var e=this.props.chat,t=this.getTabs(),a=this.getContent(),i=[S.MEDIA,S.DOCS].includes(this.state.selected),s=this.state.selectable?o.createElement(M.default,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:this.onCancelSelection},o.createElement(v.default,{chat:e,noSortOnForward:!0,theme:"mediaGallery",toastPosition:l.ToastPosition.RIGHT,downloadButton:i,selectedMessages:this.selectedMessages,onCancel:this.onCancelSelection})):null,n="right"===this.state.direction?"slide-forward":"slide-back",r=f.default.supportsFeature(f.default.F.LINK_DOC_GALLERY)?" ":p.default.t(808);return o.createElement(c.default,{theme:"gallery"},o.createElement(h.default,{title:r,onBack:this.props.onBack,type:h.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),s,t,o.createElement(u.default,{"data-list-scroll-container":!0},o.createElement(_.default,{transitionName:n,className:b.default.column},o.createElement("div",{className:b.default.multimediaGallery,key:this.state.selected},o.createElement("div",{className:b.default.column},a)))))}}t.default=T,T.defaultProps={initialTab:S.MEDIA,productsScrollOffset:0}},cdfhcjheib:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("bacehaajgh")),r=s(a("dagbcgeifg")),o=i(a("ddhijeejag")),l=s(a("hgigjbgie")),d=s(a("bdjjabfecc")),c=s(a("chjbefaccc")),u=s(a("ebddggeaib")),h=s(a("bdjgdghiah")),f=s(a("ccadaajdfc"));class p extends o.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._onNewMsgs=e=>{if(e){var t=[],a=Array.isArray(e)?e:[e];Promise.all(a.map(e=>(e.getLinks().length&&t.push(e),Promise.resolve()))).then(()=>{t.length&&this.props.linkMsgs.add(t)})}},this._queryCollection=(e,t)=>{var{linkMsgs:a,chat:i}=this.props;this.props.listeners.uiIdle(()=>{a.queryLinks(i,t)})},this._renderLinks=e=>{var{linkMsgs:t,selectedMessages:a}=this.props,i=[];return t.forEach(t=>{var s=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach((n,r)=>{n.href!==t.matchedText&&i.push(o.createElement(c.default,{key:"".concat(t.id.toString(),"-").concat(r),msg:t.safe(),link:n,displayAuthor:s,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,onClickMsg:e}))}),t.linkPreview&&i.push(o.createElement(f.default,{key:t.id.toString(),msg:t,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,displayType:l.default.DISP_TYPE.GALLERY,onClickMsg:e}))}),i.reverse(),i}}componentDidMount(){this.props.listeners.add(this.props.linkMsgs,"add remove reset",()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}),this.props.listeners.add(this.props.linkMsgs,"query_link_before",()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}),this.props.listeners.add(this.props.chat.msgs,"add bulk_add",this._onNewMsgs)}render(){var e=this.props,{linkMsgs:t,listeners:a}=e,i=(0,r.default)(e,["linkMsgs","listeners"]);return o.createElement(h.default,(0,n.default)({ref:this._setGallery,msgsCollection:t,queryCollection:this._queryCollection,hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:this._renderLinks,emptyText:d.default.t(978)},i))}}var m=(0,u.default)(p);t.default=m},cebjjhdbec:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("dfadhaifh")),r=i(a("ddhijeejag")),o=s(a("cefccdiabc")),l=i(a("dighcbdehd")),d=s(a("ccbgfecegc")),c=s(a("hgigjbgie")),u=s(a("ddeefhbafc")),h=a("hbhjdibhf"),f=s(a("bgheieccaj")),p=s(a("bdjjabfecc")),m=s(a("ebddggeaib")),g=s(a("efedbfchg")),b=s(a("dcdbbhicce")),v=s(a("dgdcjccfdi")),E=a("dhhjhedjij");function j(){var e=(0,n.default)(["get from participants table failed"]);return j=function(){return e},e}class C extends r.Component{constructor(...e){super(...e),this.commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.onClick=(e,t)=>{d.default.openChatFromUnread(t).then(e=>{e&&d.default.focusChatTextInput(t)}),this.props.onClose()},this.onShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{var{chat:t}=e;return r.createElement(l.default,{chat:t,theme:"drawer-list",contact:t.contact,mode:l.Mode.INFO,onClick:this.onClick,key:t.id.toString()})}}static getDerivedStateFromProps(e,t){var{commonGroups:a}=e.contact,i=a?a.length:0;return t.numGroups<=c.default.INFO_DRAWER_MAX_ROWS&&i>c.default.INFO_DRAWER_MAX_ROWS?{numGroups:i,collapsed:!0}:{numGroups:i}}componentDidMount(){var{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this.commonGroupInitialized=!0),(0,h.findCommonGroups)(this.props.contact).catch(()=>{throw __LOG__(4,!0,new Error)(j()),SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")})}componentDidUpdate(e){if(e.contact!==this.props.contact){var t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this.commonGroupInitialized=!1}var{commonGroups:a}=this.props.contact;a&&(this.commonGroupInitialized||(this.props.listeners.add(a,"add remove",this.rerender),this.commonGroupInitialized=!0))}componentWillUnmount(){var{commonGroups:e}=this.props.contact;e&&this.commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this.commonGroupInitialized=!1)}getData(){var e=this.props.contact.commonGroups;return e.length>c.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,c.default.INFO_DRAWER_MAX_ROWS)),e.map(e=>({itemKey:e.id.toString(),chat:e}))}render(){var e=this.props.contact.commonGroups;if(!e||!e.length)return null;var t,a=r.createElement(E.TextSpan,{theme:"section-title"},p.default.n(e.length));if(e.length>c.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){var i=e.length-c.default.INFO_DRAWER_MAX_ROWS,s=r.createElement(g.default,{theme:"transparent"},r.createElement(v.default,{name:"down"}));t=r.createElement(o.default,{image:s,theme:"drawer-list",primary:p.default.t(667,{count:i,_plural:i}),onClick:this.onShowMore})}return r.createElement(u.default,{a8nText:"section-common-groups",title:p.default.t(1548),subtitle:a},r.createElement(f.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),t)}}C.CONCERNS={contact:["commonGroups"]};var M=(0,m.default)((0,b.default)(C,C.CONCERNS));t.default=M},ceefedchff:function(e,t,a){"use strict";var i=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var s=i(a("cajgbiifbe"))},cfacfggdai:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("effbcehec")),o=i(a("ddabgbgahf")),l=i(a("daghjjjedc")),d=i(a("ccbgfecegc")),c=i(a("dahagdijgh")),u=i(a("bjheffjbgd")),h=s(a("bjjhgjdbhd")),f=i(a("bdjjabfecc")),p=i(a("dcdbbhicce")),m=a("dhhjhedjij"),g=s(a("bjhgigfbec"));class b extends n.Component{constructor(...e){super(...e),this.onUnarchiveSettingChange=()=>{var e,t=this.props.settings,a=!(null===(e=t.readLater)||void 0===e?void 0:e.moveChats);t.updateReadLaterSetting(a),d.default.openToast(n.createElement(g.default,{msg:a?f.default.t(1076):f.default.t(1077),id:(0,g.genId)()}))}}render(){var e,t=Boolean(null===(e=this.props.settings.readLater)||void 0===e?void 0:e.moveChats);return n.createElement(c.default,null,n.createElement(h.default,{title:f.default.t(1078),type:h.DRAWER_HEADER_TYPE.LARGE,onBack:this.props.onClose}),n.createElement(u.default,null,n.createElement("div",{className:o.default.section},n.createElement("div",{"data-a8n":r.default.key("auto-unarchive-setting"),className:o.default.control},n.createElement(l.default,{onChange:this.onUnarchiveSettingChange,checked:t})),n.createElement("div",{"data-a8n":r.default.key("auto-unarchive-setting-text")},f.default.t(1074),n.createElement(m.TextDiv,{theme:"muted"},f.default.t(1075))))))}}b.CONCERNS={settings:["readLater"]};var v=(0,p.default)(b,b.CONCERNS);t.default=v},chjbefaccc:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ceffhbhahb")),r=i(a("ddhijeejag")),o=s(a("cifgdghbhg")),l=a("cehdgbej"),d=s(a("hgigjbgie")),c=s(a("gfebgebbi")),u=s(a("bfbfbjjgj")),h=s(a("bdjjabfecc")),f=s(a("dijfdgjaej")),p=s(a("bcggadeggg")),m=s(a("ebddggeaib")),g=s(a("dhegibaccd")),b=s(a("dcdbbhicce")),v=s(a("dggfhciihi")),E=s(a("didfdhbecg")),j=a("ccbcihdfhg");class C extends r.Component{constructor(e){super(e),this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onSelectClick=e=>{e&&e.stopPropagation(),this.props.onMessageSelect(this.props.msg.unsafe(),!this.state.selected)},this.onClick=()=>{this.props.onClickMsg(this.props.msg.unsafe(),!this.state.selected)};var{msg:t,selectedMessages:a}=e;this.state={hover:!1,selected:a.isSelected(t.unsafe())}}componentDidMount(){this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this.onSelectChange)}render(){var{msg:e,link:t,displayAuthor:a}=this.props,i=this.props.selectable||this.state.hover?r.createElement(g.default,{checked:this.state.selected,onClick:this.onSelectClick,msgTheme:"gallery"}):null,s=(0,l.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:!0,trusted:e.isTrusted()}),m=e.body&&e.body.includes(t.url)?e.body:e.caption,b=a?r.createElement("div",{className:f.default.author},r.createElement(o.default,{msg:e,contact:e.senderObj})):null,C=e.getSuspiciousLinks().length>0;return r.createElement(u.default,{hover:this.state.hover,onClick:this.onClick,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},r.createElement("div",{className:f.default.msg},r.createElement(E.default,{transitionName:"delay-leave"},i),r.createElement(j.MessageContainer,{isSentByMe:e.isSentByMe},r.createElement("div",{className:(0,n.default)(f.default.bubble,{[f.default.hasAuthor]:a,[f.default.hasSuspiciousLinks]:C})},b,r.createElement(v.default,{link:t,displayType:d.default.DISP_TYPE.GALLERY}),r.createElement(p.default,{title:t.url,isSentByMe:e.isSentByMe,canonicalUrl:t.domain,displayType:d.default.DISP_TYPE.GALLERY,star:e.star}),r.createElement(c.default,{text:m,selectable:!0,className:f.default.text,dirMismatch:e.rtl!==h.default.isRTL(),direction:e.dir,formatters:s})))))}}C.CONCERNS={msg:["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]};var M=(0,m.default)((0,b.default)(C,C.CONCERNS));t.default=M},daaiadbhjc:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("bagchhaeje")),o=i(a("bcbbffbhff")),l=i(a("bhehhaehi")),d=i(a("dgfjacgibh")),c=i(a("ceefedchff")),u=i(a("dfhahadejg")),h=i(a("bdeebiagii")),f=i(a("ccbjchaaad")),p=i(a("ecigjabbeb")),m=i(a("dadhjdjj")),g=a("cdfejjabfa"),b=a("ecceajhjba"),v=s(a("cddegcdhjb")),E=i(a("bhfadhddje")),j=i(a("ecbiejfbbg")),C=i(a("ddajejfdfc")),M=i(a("bbecefbeaa")),_=i(a("dbdbehfcia"));class S extends h.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{var{chat:a}=this.props,i=n.createElement(E.default,{chat:a,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,sessionId:t,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(i)},this.onProductDetailFromInfo=(e,t)=>{var a=n.createElement(j.default,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,sessionId:t,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(a)},this._onProductLinkClick=(e,t)=>{this.push(n.createElement(C.default,{product:e,onBack:this._pop,sessionId:t}))},this._onCatalogLinkClick=(e,t,a)=>{this.push(n.createElement(l.default,{catalog:e,contact:t,sessionId:a,onBack:this._pop}))},this._onCartClick=(e,t)=>{this.push(n.createElement(o.default,{chat:this.props.chat,sellerJid:e,sessionId:t,onProductDetail:this.onProductDetailFromInfo,onProductCatalog:this.pushProductCatalog,onBack:this._pop}))},this.pushProductCatalog=e=>{var{chat:t}=this.props,a=n.createElement(M.default,{contact:t.contact,onProductDetail:this.onProductDetail,catalogId:t.id,onBack:this._pop,sessionId:e,businessProfile:t.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(a)},this.onProductCatalog=e=>{var t=this.props.chat.id;(0,b.logCarouselViewMoreClick)(t.toString(),e),this.pushProductCatalog(e,t)},this.onProductCatalogHeaderClick=(e,t)=>{(0,b.logCarouselViewMoreClick)(e.toString(),t),this.onProductCatalog(t)},this.onStarred=()=>{var e=n.createElement(_.default,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{var{chat:e}=this.props,t=n.createElement(m.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push(n.createElement(d.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{var e=n.createElement(v.default,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{var{chat:e}=this.props,t=n.createElement(p.default,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(t)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:v.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onLiveLocation=()=>{var e=n.createElement(g.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this.onEphemeral=()=>{var{chat:e}=this.props,t=n.createElement(u.default,{chat:e,fromInfoFlow:!0,onClose:this._pop});this.push(t)}}componentDidMount(){var e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;this.props.chat.isGroup?this.push(n.createElement(f.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})):a.isBroadcast?this.push(n.createElement(r.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&this.push(n.createElement(c.default,{contact:a.contact,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop}))}}t.default=S},dadhjdjj:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("beajagdaig")),r=i(a("ddhijeejag")),o=a("dghfbecefg"),l=s(a("ccbgfecegc")),d=s(a("hgigjbgie")),c=s(a("dahagdijgh")),u=s(a("gaeccibgi")),h=s(a("bjheffjbgd")),f=i(a("bjjhgjdbhd")),p=s(a("ddeefhbafc")),m=a("ddbdgibbbi"),g=s(a("bhbdiadfhj")),b=s(a("bgedfbbhib")),v=s(a("dfjedbigia")),E=s(a("jheedhagg")),j=s(a("bdjjabfecc")),C=s(a("ebddggeaib")),M=a("cgjcdbggeb"),_=i(a("chbeahhfcj")),S=s(a("bfgbdiffgd")),T=s(a("dcdbbhicce")),y=a("dhhjhedjij"),P=s(a("jccfhaecf")),N=({isRestricted:e,onClick:t})=>r.createElement(u.default,{onClick:t,multiline:!0},r.createElement("div",{className:b.default.header},r.createElement(y.TextSpan,{theme:"title"},j.default.t(657))),r.createElement(y.TextDiv,{theme:"muted"},e?j.default.t(663):j.default.t(656))),I=({isAnnouncement:e,onClick:t})=>r.createElement(u.default,{onClick:t,multiline:!0},r.createElement("div",{className:b.default.header},r.createElement(y.TextSpan,{theme:"title"},j.default.t(664))),r.createElement(y.TextDiv,{theme:"muted"},e?j.default.t(663):j.default.t(656))),k=({isNoFrequentlyForwarded:e,onClick:t})=>{var a=S.default.hfmStringChanges?j.default.t(661):j.default.t(660);return r.createElement(u.default,{onClick:t,multiline:!0},r.createElement("div",{className:b.default.header},r.createElement(y.TextSpan,{theme:"title"},a)),r.createElement(y.TextDiv,{theme:"muted"},e?j.default.t(662):j.default.t(659)))};class A extends r.Component{constructor(...e){super(...e),this.openSettingModal=e=>{var{chat:t,groupMetadata:a}=this.props;l.default.openModal(r.createElement(v.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this.openAnnouncementSettingModal=()=>{this.openSettingModal(d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this.openRestrictedSettingModal=()=>{this.openSettingModal(d.default.GROUP_SETTING_TYPE.RESTRICT)},this.openNoFrequentlyForwardedSettingModal=()=>{this.openSettingModal(d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this.getCurrentAdmins=()=>{var{groupMetadata:e}=this.props;return e.participants.filter(e=>e.isAdmin).map(e=>e.contact)},this.filterParticipants=e=>{var{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{var{groupMetadata:t}=this.props;return P.default.equals(e,t.owner)||(0,m.getMaybeMeUser)().equals(e)},this.openManageAdminModal=()=>{l.default.openModal(r.createElement(_.default,{onConfirm:this.updateAdmins,getInitialItems:this.getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this.filterParticipants,title:j.default.t(802),useShortName:!0,useAllContacts:!0,listType:_.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:o.FooterType.CONFIRM,multipleSelectionFooterType:o.FooterType.CONFIRM}))},this.updateAdmins=e=>{var{chat:t,groupMetadata:a}=this.props,i=a.participants,s=i.filter(e=>e.isAdmin),r=(0,n.default)(e,s,(e,t)=>e.id.equals(t.id)).map(e=>i.assertGet(e.id)),o=(0,n.default)(s,e,(e,t)=>e.id.equals(t.id));r.length>0&&(r.forEach(e=>{e.contact.pendingAction++}),(0,M.promoteParticipants)(t,r).finally(()=>{r.forEach(e=>{e.contact.pendingAction--})})),o.length>0&&(o.forEach(e=>{e.contact.pendingAction++}),(0,M.demoteParticipants)(t,o).finally(()=>{o.forEach(e=>{e.contact.pendingAction--})})),l.default.closeModal()}}render(){var e,t,{groupMetadata:a}=this.props,i=r.createElement(N,{onClick:this.openRestrictedSettingModal,isRestricted:a.restrict}),s=r.createElement(I,{onClick:this.openAnnouncementSettingModal,isAnnouncement:a.announce});(i||s)&&(e=r.createElement(p.default,null,i,s)),S.default.frequentlyForwardedGroupSetting&&g.default.supportsFeature(g.default.F.FREQUENTLY_FORWARDED_SETTING)&&(t=r.createElement(p.default,null,r.createElement(k,{onClick:this.openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:a.noFrequentlyForwarded})));var n=r.createElement(p.default,null,r.createElement(u.default,{onClick:this.openManageAdminModal,multiline:!0},r.createElement("div",{className:b.default.header},r.createElement(y.TextSpan,{theme:"title"},j.default.t(802)))));return r.createElement(c.default,{theme:"striped"},r.createElement(f.default,{title:j.default.t(665),type:f.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),r.createElement(h.default,null,e,t,n))}}A.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]};var D=(0,E.default)((0,C.default)((0,T.default)(A,A.CONCERNS)));t.default=D},daghgbcch:function(e,t){e.exports={body:"_2gti7",avatar:"Lffaz",nameSecondary:"_16tJY",screenName:"OXGxe",businessVname:"_7S4qI",icon:"_3DnCq",titleAbout:"UZEvX",chevron:"_3R3kh"}},dajceebgdj:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("cefccdiabc")),o=i(a("cfadcbbiie")),l=i(a("hhcjfgifh")),d=s(a("jagjbhcgf")),c=i(a("dgebcfedgb")),u=i(a("gfebgebbi")),h=i(a("bdjjabfecc")),f=i(a("dcjigehfeb")),p=i(a("bjcfcebada")),m=a("cadfgefaja"),g=i(a("dcdbbhicce")),b=i(a("dgdcjccfdi"));class v extends n.PureComponent{constructor(...e){super(...e),this.getMenuBtns=()=>this.props.msgIndexInAlbum>=0?this.getAlbumMediaMenuBtns():this.getNonAlbumMediaMenuBtns(),this.getNonAlbumMediaMenuBtns=()=>{var e=[],{msg:t}=this.props;return e.push(n.createElement(m.MenuBarItem,{key:"btnGoToMsg",icon:n.createElement(b.default,{name:"bubble"}),title:h.default.t(623),onClick:this.props.onGoToMsgClick})),e.push(this.getStarMenuBarItem()),t.canForward()&&e.push(this.getForwardMenuBarItem()),e.push(n.createElement(m.MenuBarItem,{key:"btnDownload",icon:n.createElement(b.default,{name:"download"}),title:h.default.t(1427),disabled:!this.isMediaDownloadable(),onClick:this.props.onDownloadClick})),e},this.getAlbumMediaMenuBtns=()=>{var e=[],{msg:t}=this.props;return t.canReply()&&e.push(n.createElement(m.MenuBarItem,{key:"btnReply",icon:n.createElement(b.default,{name:"reply"}),title:h.default.t(1086),onClick:this.props.onReplyClick})),e.push(this.getStarMenuBarItem()),e.push(n.createElement(m.MenuBarItem,{key:"btnDelete",icon:n.createElement(b.default,{name:"delete"}),title:h.default.t(1467),onClick:this.props.onDeleteClick})),t.canForward()&&e.push(this.getForwardMenuBarItem()),e.push(this.getDropdownMenuBarItem()),e},this.getStarMenuBarItem=()=>{var e,t,a,{msg:i}=this.props;return i.star?(e=this.props.onUnstarClick,t="unstar-btn",a=h.default.t(1267)):(e=this.props.onStarClick,t="star-btn",a=h.default.t(1192)),n.createElement(m.MenuBarItem,{key:t,icon:n.createElement(b.default,{name:t}),title:a,onClick:e})},this.getForwardMenuBarItem=()=>n.createElement(m.MenuBarItem,{key:"btnForward",icon:n.createElement(b.default,{name:"forward"}),title:h.default.t(585),onClick:this.props.openForwardFlow}),this.getDropdownMenuBarItem=()=>{var{msg:e}=this.props,t=[];return e.isSentByMe&&t.push(n.createElement(c.default,{key:"dropdownMsgInfo",action:this.props.onMsgInfoClick},h.default.t(838))),t.push(n.createElement(c.default,{key:"dropdownGoToMsg",action:this.props.onGoToMsgClick},h.default.t(623)),n.createElement(c.default,{key:"dropdownDownload",action:this.props.onDownloadClick,disabled:!this.isMediaDownloadable()},h.default.t(1427))),n.createElement(m.MenuBarItem,{key:"btnMenu",icon:n.createElement(b.default,{name:"menu"}),title:h.default.t(830)},n.createElement(d.default,{type:"dropdown_menu",key:"MediaPanelHeaderDropdown",flipOnRTL:!0,dirX:d.DirX.LEFT},t))},this.isMediaDownloadable=()=>{var{mediaData:e}=this.props;return!!e.renderableUrl||e.mediaStage===f.default.STAGE.RESOLVED}}render(){var e=this.props.msg,t=e.displayName(!0,!0);return e.isGroupMsg&&(t+=" @ "+e.chat.title()),n.createElement("div",{className:p.default.mediaPanelHeader},n.createElement("div",{className:p.default.info},n.createElement(r.default,{idle:!0,image:n.createElement(l.default,{id:e.sender,size:40}),primary:n.createElement(u.default,{ellipsify:!0,text:t}),secondary:o.default.relativeDateAndTimeStr(e.t),theme:"media"})),n.createElement("div",{className:p.default.mediaPanelTools},n.createElement(m.MenuBar,{key:"media-panel-header",theme:"strong"},this.getMenuBtns(),n.createElement(m.MenuBarItem,{a8nText:"btn-close",icon:n.createElement(b.default,{name:"x-viewer"}),title:h.default.t(1441),onClick:this.props.onClose}))))}}v.CONCERNS={msg:["star","isGroupMsg","chat","type","isGif","sender","t","isSentByMe"],mediaData:["filehash","mediaStage","renderableUrl"]};var E=(0,g.default)(v,v.CONCERNS);t.default=E},dbbhcaicgf:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("ddeefhbafc")),o=i(a("bdjjabfecc")),l=i(a("ebddggeaib")),d=i(a("cdcijfdgje")),c=a("cicjibbhdb"),u=i(a("eafdabbdgj")),h=i(a("dcdbbhicce")),f=a("cjfegjecaj"),p=i(a("dgdcjccfdi")),m=a("dhhjhedjij");class g extends n.Component{constructor(e){super(e),this.updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){var{chat:e}=this.props;e.liveLocationQueried||d.default.getActive(e.id.toString()).then(()=>{e.liveLocationQueried=!0}).catch(()=>{}),this.props.listeners.add((0,f.unproxy)(e),"change:liveLocation",()=>{var{liveLocation:t}=e;t&&(this.removeParticipantListener(t),this.addParticipantListener(t),this.updateParticipants())});var{liveLocation:t}=e;t&&this.addParticipantListener(t)}addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this.updateParticipants)}removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this.updateParticipants)}getParticipants(e){var{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){var e,t,{chat:a}=this.props,{participants:i}=this.state,s=0;if(i.forEach(a=>{a.isMe?e=!0:(t||(t=a.contact),s++)}),a.isGroup)return e?1===i.length?o.default.t(775):o.default.t(774,{count:s,_plural:s}):o.default.t(771,{count:s,_plural:s});if(e){if(1===i.length)return o.default.t(775);if(t)return o.default.t(773,{name:t.formattedShortNameWithNonBreakingSpaces})}else if(t)return o.default.t(770,{name:t.formattedShortNameWithNonBreakingSpaces});return""}render(){var{onClick:e}=this.props;if(!this.state.participants.length)return null;var t=n.createElement(p.default,{name:(0,c.liveLocationIcon)(!0)});return n.createElement(r.default,{a8nText:"section-live-location",theme:"padding",title:o.default.t(778),titleOnClick:e},n.createElement(u.default,{side:t,onClick:e},n.createElement(m.TextSpan,{theme:"title"},this.getText())))}}g.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]};var b=(0,l.default)((0,h.default)(g,g.CONCERNS));t.default=b},dbejedjeej:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("fhgchaefa")),o=i(a("ccbgfecegc")),l=i(a("bbfjdcedab")),d=i(a("hgigjbgie")),c=i(a("gfebgebbi")),u=a("djaiggcdb"),h=a("facgccaif"),f=i(a("bhbdiadfhj")),p=i(a("bdjjabfecc")),m=i(a("dcdbbhicce"));class g extends n.PureComponent{constructor(...e){super(...e),this.onConfirm=()=>{o.default.closeModal()},this.onLearnMore=e=>{e.preventDefault(),o.default.closeModal("none"),setTimeout(()=>(0,u.openExternalLink)((0,h.getBusinessFaqUrl)()),10)},this.getMessage=()=>{var e=this.props.contact;switch(e.verifiedLevel){case d.default.VERIFIED_LEVEL.HIGH:return p.default.t(1652);case d.default.VERIFIED_LEVEL.LOW:return p.default.t(1654);case d.default.VERIFIED_LEVEL.UNKNOWN:return p.default.t(1656,{businessName:e.formattedName})}},this.getMessageV2=()=>{var e=this.props.contact;switch(e.verifiedLevel){case d.default.VERIFIED_LEVEL.HIGH:return e.name===e.verifiedName?p.default.t(1424,{businessName:e.verifiedName}):p.default.t(1425,{businessName:e.verifiedName});case d.default.VERIFIED_LEVEL.LOW:case d.default.VERIFIED_LEVEL.UNKNOWN:return p.default.t(1426)}}}render(){var e;e=f.default.supportsFeature(f.default.F.VNAME_V_2)?this.getMessageV2():this.getMessage();var t=n.createElement(r.default,{href:(0,h.getBusinessFaqUrl)(),onClick:this.onLearnMore},p.default.t(745));return n.createElement(l.default,{onOK:this.onConfirm,okText:p.default.t(996)},n.createElement(c.default,{text:e})," ",t)}}g.CONCERNS={contact:["name","verifiedLevel","verifiedName","formattedName"]};var b=(0,m.default)(g,g.CONCERNS);t.default=b},dcccbfbehi:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("ieeidjijb")),o=i(a("dcdbbhicce"));class l extends n.Component{constructor(...e){super(...e),this.contextEnabled=()=>{var{contextEnabled:e,contact:t}=this.props;return null!=e&&e(t)},this.onContext=e=>{var{onContext:t,contact:a}=this.props;return t&&t(e,a)}}render(){var{contact:e,participant:t,onClick:a,contextMenu:i,isPendingParticipant:s}=this.props;return n.createElement(r.default,{contact:e,admin:t.isAdmin,onClick:a,theme:"drawer-list",contextEnabled:this.contextEnabled,contextMenu:i,onContext:this.onContext,isPendingParticipant:s,showNotifyName:!0,waitIdle:!0})}}l.CONCERNS={participant:["isAdmin"]};var d=(0,o.default)(l,l.CONCERNS);t.default=d},dcdhjeiaaf:function(e,t){e.exports={multimediaGallery:"_1DQVz",column:"_2uWTi",menuItem:"_327_4",active:"_1R7Xl",menuTabsLists:"_3yI1b",threeTabs:"_3-ScJ",fourTabs:"_1faZL"}},ddabgbgahf:function(e,t){e.exports={section:"_1_D5Q",control:"_3Y4_n"}},ddbhiaeibf:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{chat:t,groupMetadata:a,onClick:i}=e;return a?n.createElement(E,{groupMetadata:a,onClick:i}):n.createElement(b,{chat:t,onClick:i})},t.BaseEphemeralSettingRow=j;var n=s(a("ddhijeejag")),r=a("dfdebdgdei"),o=i(a("ccbgfecegc")),l=i(a("bbfjdcedab")),d=i(a("gaeccibgi")),c=i(a("bjhgfifchg")),u=a("bgjdfabfgh"),h=i(a("bdjjabfecc")),f=i(a("dcdbbhicce")),p=i(a("dgdcjccfdi")),m=a("dhhjhedjij");class g extends n.PureComponent{constructor(...e){super(...e),this._getEphemeralDuration=()=>{var e;return null!==(e=this.props.chat.ephemeralDuration)&&void 0!==e?e:0},this._unblockContact=()=>{var{chat:e,onClick:t}=this.props;e.contact.addPendingAction((0,r.unblockContact)(e.contact)).then(()=>{t(),o.default.closeModal()}).catch(()=>{})},this._closeModal=()=>{o.default.closeModal()},this._openUnblockContactModal=()=>{o.default.openModal(n.createElement(l.default,{onOK:this._unblockContact,okText:h.default.t(1255),onCancel:this._closeModal,cancelText:h.default.t(1431)},this._getEphemeralDuration()?h.default.t(561):h.default.t(562)))},this._handleClick=()=>{var{chat:e,onClick:t}=this.props;e.contact.isContactBlocked?this._openUnblockContactModal():t()}}render(){return n.createElement(j,{ephemeralDuration:this._getEphemeralDuration(),canChange:!0,onClick:this._handleClick})}}g.CONCERNS={chat:["contact","ephemeralDuration"]};var b=(0,f.default)(g,g.CONCERNS);class v extends n.PureComponent{constructor(...e){super(...e),this._canChange=()=>this.props.groupMetadata.participants.iAmAdmin(),this._closeModal=()=>{o.default.closeModal()},this._openNonAdminModal=()=>{o.default.openModal(n.createElement(l.default,{onOK:this._closeModal,okText:h.default.t(1579)},h.default.t(513)))},this._handleClick=()=>{var{onClick:e}=this.props;this._canChange()?e():this._openNonAdminModal()}}render(){var e;return n.createElement(j,{ephemeralDuration:null!==(e=this.props.groupMetadata.ephemeralDuration)&&void 0!==e?e:0,canChange:this._canChange(),onClick:this._handleClick})}}v.CONCERNS={groupMetadata:["ephemeralDuration","participants"]};var E=(0,f.default)(v,v.CONCERNS);function j(e){var t,{ephemeralDuration:a,canChange:i,onClick:s}=e;t=a>0?i?h.default.t(556):(0,u.getEphemeralExplanationString)(a):h.default.t(555);var r=n.createElement(p.default,{className:i?c.default.chevronIcon:c.default.ephemeralIcon,name:i?"chevron-right-alt":"ephemeral",directional:!0});return n.createElement(d.default,{onClick:s,side:r,multiline:!0},n.createElement("div",{className:c.default.header},n.createElement(m.TextSpan,{theme:"title"},h.default.t(658))),n.createElement(m.TextDiv,{theme:"muted"},t))}},dfbgeifbgf:function(e,t){e.exports={nuxContainer:"_20MdK",flatListContainer:"_3CXaU",btnClose:"OnU-c",nuxHeader:"_2wpoG",nuxContent:"_3pCck",nuxIcon:"_10ojj",nuxText:"eq-0-"}},dfhcaiigfg:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("dbdfbgehgj")),o=i(a("ccbgfecegc")),l=i(a("bdacheahgj")),d=i(a("dgebcfedgb")),c=a("ddbdgibbbi"),u=i(a("bhbdiadfhj")),h=i(a("bdjjabfecc")),f=i(a("ebddggeaib")),p=i(a("cgjdibiahi")),m=i(a("dfciadajdf")),g=i(a("jccfhaecf"));class b extends n.Component{constructor(...e){super(...e),this.state={contextMenu:null},this.openChat=e=>{r.default.find(e).then(e=>{o.default.closeModal(),o.default.openChatFromUnread(e)})},this.contextMenu=e=>!g.default.equals((0,c.getMaybeMeUser)(),e),this.onParticipantMenu=(e,t)=>{var a=this.props.chat.groupMetadata.participants,i=a.assertGet(t.id),s=[];if(a.canPromote(i)){var r=this.props.onParticipantPromote.bind(null,i,!1);s.push(n.createElement(d.default,{a8n:"mi-grp-promote-admin",key:"promote",action:r},h.default.t(819)))}if(a.canRemove(i)){var o=this.props.onParticipantRemove.bind(null,i,!1);s.push(n.createElement(d.default,{a8n:"mi-grp-remove-participant",key:"remove",action:o},h.default.t(823)))}if(u.default.supportsFeature(u.default.F.GROUPS_V_3)&&a.canDemote(i)){var l=this.props.onDemoteAdmin.bind(this,i);s.push(n.createElement(d.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:l},h.default.t(480)))}g.default.equals((0,c.getMaybeMeUser)(),i.id)||s.push(n.createElement(d.default,{key:"message author",action:this.openChat.bind(null,i.contact.id)},h.default.t(834,{author:i.contact.formattedName}))),e.anchor||e.event||e.persist(),this.setState({contextMenu:{contactId:t.id,menu:s,anchor:e.anchor,event:e.anchor?void 0:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.contextEnabled=()=>!1,this.cancel=()=>{o.default.closeModal()},this.isAdmin=e=>this.props.chat.groupMetadata.participants.assertGet(e).isAdmin,this.contactFilter=e=>!!this.props.chat.groupMetadata.participants.get(e.id)}componentDidMount(){var e=this.props.chat.groupMetadata.participants;this.props.listeners.add(e,"add remove reset",()=>{this.forceUpdate()})}render(){var e;return this.state.contextMenu&&(e=n.createElement(p.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},n.createElement(m.default,{contextMenu:this.state.contextMenu}))),n.createElement(n.Fragment,null,n.createElement(l.default,{title:h.default.t(1134),filter:this.contactFilter,onCancel:this.cancel,openContextOnClick:!0,contextEnabled:this.contextEnabled,contextMenu:this.contextMenu,onContext:this.onParticipantMenu,showNotifyName:!0,listenForAdminChange:!0,participantCollection:this.props.chat.groupMetadata.participants}),e)}}var v=(0,f.default)(b);t.default=v},dfjedbigia:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("hgigjbgie")),o=i(a("bdjjabfecc")),l=i(a("bfgbdiffgd")),d=a("ceiehehagg"),c=i(a("bajacafbgd")),u=i(a("dcdbbhicce"));class h extends n.PureComponent{constructor(...e){super(...e),this._handleSelect=e=>{var{chat:t,settingType:a}=this.props;e!==this._getInitialValue()&&(0,d.setGroupProperty)(t,a,e).catch(()=>()=>{})}}_getOptions(){var{settingType:e}=this.props;switch(e){case r.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case r.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:o.default.t(656),value:0},{label:o.default.t(663),value:1}];case r.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:o.default.t(659),value:0},{label:o.default.t(662),value:1}];default:return[]}}_getInitialValue(){var{settingType:e,groupMetadata:t}=this.props,{restrict:a,announce:i,noFrequentlyForwarded:s}=t;switch(e){case r.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return i?1:0;case r.default.GROUP_SETTING_TYPE.RESTRICT:return a?1:0;case r.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return s?1:0;default:return 0}}_getPopupTitle(){var{settingType:e}=this.props;switch(e){case r.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return o.default.t(664);case r.default.GROUP_SETTING_TYPE.RESTRICT:return o.default.t(657);case r.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return l.default.hfmStringChanges?o.default.t(661):o.default.t(660);default:return""}}render(){return n.createElement(c.default,{options:this._getOptions(),initialValue:this._getInitialValue(),title:this._getPopupTitle(),onSelect:this._handleSelect})}}h.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded"]};var f=(0,u.default)(h,h.CONCERNS);t.default=f},dghiegaafa:function(e,t){e.exports={contactBusinessInfo:"_1i05m",contactBusinessInfoSpinner:"yfORU",dataRow:"_3Q3iR",businessHoursRow:"_2x95P",businessHoursDay:"_2Ov-G",businessHoursHours:"SUaWx",businessHoursChevron:"_4u9Tf",flipSvg:"uB3hI",dataRowIcon:"_2j-Ho",dataRowText:"_2LnbE",businessTitleText:"_3zfAu",businessMarker:"_2_k2G",verifiedLabel:"_3uWbg",businessMap:"PKBwD",address:"xp07G",link:"_2JohZ"}},dgjaedef:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("bacehaajgh")),r=s(a("dagbcgeifg")),o=i(a("ddhijeejag")),l=s(a("bdjjabfecc")),d=s(a("ebddggeaib")),c=s(a("bdjgdghiah"));class u extends o.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{docMsgs:a,chat:i}=this.props;this.props.listeners.uiIdle(()=>{a.queryDocs(i,t)})}}componentDidMount(){this.props.listeners.add(this.props.docMsgs,"add remove reset",()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}),this.props.listeners.add(this.props.docMsgs,"query_doc_before",()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})}render(){var e=this.props,{docMsgs:t,listeners:a}=e,i=(0,r.default)(e,["docMsgs","listeners"]);return o.createElement(c.default,(0,n.default)({ref:this._setGallery,msgsCollection:t,queryCollection:this._queryCollection,hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:l.default.t(976)},i))}}var h=(0,d.default)(u);t.default=h},dhgcheacjd:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("cfacfggdai")),o=i(a("djhbgdedbe")),l=i(a("bdeebiagii")),d=i(a("eehbajafb"));class c extends l.default{constructor(...e){super(...e),this.showArchiveSettingsDrawer=()=>{this.push(n.createElement(r.default,{settings:d.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(o.default,{showSettings:this.showArchiveSettingsDrawer,onClose:this._pop}))}}t.default=c},dijfdgjaej:function(e,t){e.exports={msg:"_3_nLH",text:"_3B2kh",bubble:"_1MYBw",author:"_2NwHk",hasSuspiciousLinks:"_1dXIA",hasAuthor:"_1IFWB",suspiciousLabel:"_38JlO"}},djhbgdedbe:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("ddhijeejag")),r=i(a("dfbgeifbgf")),o=s(a("dighcbdehd")),l=i(a("dbdfbgehgj")),d=i(a("ccbgfecegc")),c=i(a("hgigjbgie")),u=i(a("dahagdijgh")),h=i(a("bjheffjbgd")),f=s(a("bjjhgjdbhd")),p=i(a("jagjbhcgf")),m=i(a("dgebcfedgb")),g=a("cdhbdacigj"),b=i(a("bgheieccaj")),v=i(a("dbfjeecgih")),E=a("hcabbffbb"),j=i(a("ddajbaceej")),C=a("ddbdgibbbi"),M=i(a("dhfbfehaef")),_=i(a("bdjjabfecc")),S=i(a("ebddggeaib")),T=a("cadfgefaja"),y=i(a("bfgbdiffgd")),P=i(a("dcaibchbg")),N=i(a("dgdcjccfdi")),I=i(a("dhhjhedjij")),k=i(a("didfdhbecg"));class A extends n.Component{constructor(...e){super(...e),this.flatListController=new v.default,this.selection=new P.default([],e=>e.id.toString()),this.state={forceHideNux:!1},this.onClick=(e,t)=>{d.default.openChatFromUnread(t).then(e=>{e&&d.default.focusChatTextInput(t)}),y.default.enhancedArchive||this.onClose()},this.onClose=()=>{this.props.onClose()},this.onNextChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setNext(!0)},this.onPrevChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setPrev(!0)},this.renderItem=e=>n.createElement(o.default,{chat:e.chat,mode:o.Mode.LAST,active:this.selection,onClick:this.onClick,hideMuteIcon:y.default.enhancedArchive,capUnreadCount:y.default.enhancedArchive?c.default.UNREAD_COUNT_CAP:void 0,showEphemeralIcon:!0}),this.setRefHotKeys=e=>{this.refList=e},this.onCloseNux=()=>{(0,C.setNUX)(c.default.NUX.ARCHIVE,{views:c.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this.setState({forceHideNux:!0})},this.showNux=()=>{var e=l.default.some(e=>e.archive);return y.default.enhancedArchive&&e&&(0,C.shouldShowNUX)(c.default.NUX.ARCHIVE)&&!this.state.forceHideNux}}componentDidMount(){y.default.enhancedArchive&&!(0,C.getNUX)(c.default.NUX.ARCHIVE)&&(0,C.setNUX)(c.default.NUX.ARCHIVE,{views:0,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this.showNux()&&(0,C.viewNUX)(c.default.NUX.ARCHIVE),this.props.listeners.add(l.default,"change:archive add remove",()=>{this.forceUpdate()}),this.refList&&j.default.focus(this.refList)}getData(e){return e.map(e=>({itemKey:e.id.toString(),chat:e}))}render(){var e,t,a=l.default.filter(e=>e.archive);if(this.selection.init(a,!0),this.showNux()&&(t=n.createElement("div",{className:r.default.nuxContainer},n.createElement(E.FlexColumn,{align:"center"},n.createElement("span",{className:r.default.nuxIcon},n.createElement(N.default,{name:"archive-nux"})),n.createElement("div",{className:r.default.nuxHeader},n.createElement(I.default,{theme:"large",as:"h1"},_.default.t(1073))),n.createElement("div",{className:r.default.nuxContent},n.createElement("div",{className:r.default.nuxText},n.createElement(I.default,{theme:"plain",as:"p"},_.default.t(1072))))),n.createElement("button",{onClick:this.onCloseNux,className:r.default.btnClose},n.createElement(N.default,{name:"x-alt"})))),a.length>0){var i={down:this.onNextChat,up:this.onPrevChat};e=n.createElement(M.default,{onRef:this.setRefHotKeys,handlers:i},n.createElement(k.default,{transitionName:"slide"},t),n.createElement(b.default,{className:r.default.flatListContainer,data:this.getData(a),flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))}else e=n.createElement(g.Archived,null);var s=y.default.enhancedArchive?n.createElement(T.MenuBarItem,{a8nText:"archived-menu",icon:n.createElement(N.default,{name:"menu"}),title:_.default.t(830)},n.createElement(p.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ArchivedDrawerHeader",dirX:"LEFT"},n.createElement(m.default,{a8n:"open-archive-settings menu-item",action:this.props.showSettings},_.default.t(1078)))):null,o=y.default.enhancedArchive?_.default.t(1071):_.default.t(209);return n.createElement(u.default,{theme:"archived"},n.createElement(f.default,{title:o,onBack:this.onClose,type:f.DRAWER_HEADER_TYPE.LARGE,menu:s}),n.createElement(h.default,{flatListControllers:[this.flatListController]},e))}}var D=(0,S.default)(A);t.default=D},eaefbieabb:function(e,t,a){"use strict";var i=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.dayToWeekday=l,t.businessHoursFromConfig=d,t.getWebsiteLink=function(e){var t=encodeURIComponent(e);return"https://l.wl.co/l?u=".concat(t)},t.getBusinessHours=function(e){var{config:t}=e,a=(new Date).getDay();return n.DAYS_OF_WEEK.map((e,i)=>{var s=(a+i)%n.DAYS_OF_WEEK.length,r=n.DAYS_OF_WEEK[s];return{day:l(s),hours:d(t[r]),first:0===i}})},t.getBusinessHoursForEdit=function({config:e}){var t,a=n.DAYS_OF_WEEK.map((a,i)=>{var n,r=e[a],l=s.default.weekdays(i);return r&&(t=r.mode,r.hours&&(n=r.hours.map(([e,t])=>[(0,o.minutesToTime)(e),(0,o.minutesToTime)(t)]))),{dayName:l,dayKey:a,closed:!r,hours:n}}),i=s.default.weekdays(!0,0),r=s.default.weekdays().indexOf(i),l=a.splice(r);return{mode:t,days:[...l,...a]}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return o.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return o.timeStringToMinutes}});var s=i(a("dgdjiicfdg")),n=a("bechdajic"),r=i(a("bdjjabfecc")),o=a("cajaabjdhb");function l(e){return s.default.weekdays(e)}function d(e){switch(e&&e.mode){case n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return e&&e.hours?e.hours.map(e=>e.map(o.minutesToTime).join(" - ")).join("\n"):"";case n.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return r.default.t(317);case n.BUSINESS_HOUR_MODES.OPEN_24H:return r.default.t(319);default:return r.default.t(318)}}},eafjigajdj:function(e,t){e.exports={container:"Su-Gh",block:"xYtbD",main:"_3VotX",side:"U4qYC",multiline:"SMGPj"}},ebijbjhdie:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e;return n.createElement(r.default,{onClick:t,side:n.createElement(d.default,{name:"lock",className:o.default.icon}),multiline:!0},n.createElement("div",{className:o.default.header},n.createElement(c.TextSpan,{theme:"title"},l.default.t(1228))),n.createElement(c.TextDiv,{theme:"muted"},l.default.t(1227)))};var n=s(a("ddhijeejag")),r=i(a("gaeccibgi")),o=i(a("idgadgbaj")),l=i(a("bdjjabfecc")),d=i(a("dgdcjccfdi")),c=a("dhhjhedjij")},gaeccibgi:function(e,t,a){"use strict";var i=a("cfjecfhbfg"),s=a("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null!=e.side?n.createElement("div",{className:l.default.side},e.side):null,a=(0,r.default)(l.default.container,{[l.default.multiline]:e.multiline});return n.createElement("div",{"data-a8n":o.default.key(e.a8nText),className:a,role:e.onClick?"button":null,onClick:e.onClick},n.createElement("div",{className:l.default.block},n.createElement("div",{className:l.default.main},e.children),t))};var n=s(a("ddhijeejag")),r=i(a("ceffhbhahb")),o=i(a("effbcehec")),l=i(a("eafjigajdj"))},gifabeaga:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("dfadhaifh")),r=s(a("hhegggegb")),o=i(a("ddhijeejag")),l=s(a("bgcibhihaj")),d=s(a("cdhfigedae")),c=s(a("bcbjddibih")),u=s(a("ecdebjcgfa"));function h(){var e=(0,n.default)(["MediaViewerFlow: attempted to render a msg without mediaData: ",""]);return h=function(){return e},e}class f extends o.Component{constructor(e){super(e),this.setThumbRef=(e,t)=>{this.thumbRefs[t]=e},this.isPreviewPreferred=e=>{var t=this.thumbRefs[e];if(!t)return!1;var a=t.getBoundingClientRect(),i=(a.left+a.right)/2;return!(i>-1*window.innerWidth&&i<2*window.innerWidth)},this.getMsgIdToPreferPreview=()=>{var e=new Map;return this.props.mediaMsgs.forEach(t=>{var a=t.id.toString();e.set(a,this.isPreviewPreferred(a))}),e},this.onScroll=e=>{this.handleScroll(),this.props.onScroll(e)},this._handleScroll=()=>{var e=this.getMsgIdToPreferPreview();(0,l.default)(this.state.msgIdToPreferPreview,e)||this.setState({msgIdToPreferPreview:e})},this.getThumbs=()=>{var{highlightedMsgIds:e}=this.props,t=e&&e.size>0&&e.has(this.props.activeMsg.id.toString()),a=[];return this.props.mediaMsgs.forEach(i=>{if(null!=i.mediaData){var s=t&&e&&!e.has(i.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push(o.createElement(d.default,{theme:s,active:i===this.props.activeMsg,msg:i,containerRef:e=>{this.setThumbRef(e,i.id.toString()),i===this.props.activeMsg&&this.props.onSetActiveThumb(e)},key:"media-".concat(i.id.id),onClick:()=>{this.props.onSelectThumb(i)},preferPreview:!!this.state.msgIdToPreferPreview.get(i.id.toString())}))}else{var n=this.props.activeMsg;__LOG__(3,!0)(h(),JSON.stringify({type:i.type,isMedia:i.isMedia,startMsgType:n.type,startMsgIsMedia:n.isMedia}))}}),a.push(o.createElement("div",{className:c.default.mediaThumb,key:"spinner-right"},this.props.mediaMsgs.queryMediaAfter?o.createElement(u.default,{stroke:6,size:24}):null)),a.unshift(o.createElement("div",{className:c.default.mediaThumb,key:"spinner-left"},this.props.mediaMsgs.queryMediaBefore?o.createElement(u.default,{stroke:6,size:24}):null)),a.push(o.createElement("div",{className:c.default.thumbPadding,key:"padding-right"})),a.unshift(o.createElement("div",{className:c.default.thumbPadding,key:"padding-left"})),a},this.thumbRefs={},this.handleScroll=(0,r.default)(this._handleScroll,100),this.state={msgIdToPreferPreview:this.getMsgIdToPreferPreview()}}componentWillUnmount(){this.handleScroll.cancel()}render(){var e=this.getThumbs();return o.createElement("div",{className:c.default.thumbsContainer,ref:this.props.setRefThumbsContainer},o.createElement("div",{className:c.default.scrollContainer,dir:"ltr"},o.createElement("div",{onScroll:this.onScroll,className:c.default.viewerThumbs,ref:this.props.setRefThumbs},e)))}}t.default=f},hjbhabfd:function(e,t,a){"use strict";var i=a("bfejgijfbh"),s=a("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return function e(t,a="",i=(0,o.genId)()){var s=a&&a.trim();if(s===t.groupMetadata.desc)return Promise.reject(new c.ActionError);""===s&&(s=null);var n=(0,h.sendSetGroupDescription)(t.id,s,(0,f.default)(),t.groupMetadata.descId),p=t.groupMetadata.desc,g=new o.ActionType(u.default.t(83)),b=n.then(()=>new o.ActionType(u.default.t(85),{actionText:u.default.t(183),actionHandler:()=>e(t,p,i)})).catchType(d.ServerStatusCodeError,e=>{if(e.status>=400)return new o.ActionType(u.default.t(84))}).catch(()=>(__LOG__(3)(m()),new o.ActionType(u.default.t(84),{actionText:u.default.t(179),actionHandler:()=>e(t,s,i)})));return l.default.openToast(r.createElement(o.ActionToast,{id:i,initialAction:g,pendingAction:b})),n.then(e=>{e._duplicate||t.groupMetadata.set({desc:s||""})}).catchType(d.ServerStatusCodeError,()=>{})}((0,p.unproxy)(e),t)};var n=s(a("dfadhaifh")),r=i(a("ddhijeejag")),o=a("dheeaichcj"),l=s(a("ccbgfecegc")),d=a("bgihjbde"),c=i(a("cajijabhgb")),u=s(a("bdjjabfecc")),h=a("babicefcfg"),f=s(a("cfejjfjhca")),p=a("cjfegjecaj");function m(){var e=(0,n.default)(["models:chat:setGroupDesc dropped"]);return m=function(){return e},e}},idgadgbaj:function(e,t){e.exports={header:"_3XzEH",icon:"_2BpOG"}}}]);